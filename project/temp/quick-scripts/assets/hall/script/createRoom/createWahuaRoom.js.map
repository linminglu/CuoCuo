{"version":3,"sources":["createWahuaRoom.js"],"names":["Audio","require","ModelEnum","cc","Enum","None","Quan","Ju","MinJuShu","MaxJuShu","MinQuanShu","MaxQuanShu","PerJuCard","PerQuanCard","Class","extends","Component","properties","btnAdd","type","Node","default","btnMinus","btnQuan","btnJu","btnRecharge","btnCreateRoom","noChose","btnClose","fangFeiShuoming","Label","numLabel","numTitleLabel","labelModel","needCard","currentCardLabel","Prefab","onLoad","_juShu","_quanShu","_model","_hasCard","_needCard","on","onBtnAddClick","onBtnMinusClick","onBtnQuanClick","onBtnJuClick","onBtnRechargeClick","onBtnCreateRoomClick","onBtnCloseClick","createInfo","fun","utils","getCreateRoomData","gameConst","gameType","digFlower","setToggleChecked","reduceCard","playerNum","patterns","teShu","getChildByName","getComponent","Toggle","isChecked","needLocation","makersType","ring","roomNum","animation","node","Animation","clips","getClips","string","onEnable","play","name","value","i","children","length","playEffect","once","destroy","active","instantiate","storePre","parent","req","GameType","Address","db","getData","location","fangFei","forEach","parseInt","substring","renShu","moShi","saveCreateRoomData","event","dispatch","flag","text","net","pSend","rsp","RetCode","returnStatu","setData","director","loadScene"],"mappings":"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","file":"createWahuaRoom.js","sourceRoot":"../../../../../../assets/hall/script/createRoom","sourcesContent":["let Audio = require('Audio');\nconst ModelEnum = cc.Enum({\n    None: 0,\n    Quan: 1,\n    Ju: 2,\n});\nconst MinJuShu = 4;\nconst MaxJuShu = 32;\nconst MinQuanShu = 1;\nconst MaxQuanShu = 4;\nconst PerJuCard = 0;\nconst PerQuanCard = 0;\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btnAdd: {\n            type: cc.Node,\n            default: null,\n        },\n\n        btnMinus: {\n            type: cc.Node,\n            default: null,\n        },\n\n        btnQuan: {\n            type: cc.Node,\n            default: null,\n        },\n\n        btnJu: {\n            type: cc.Node,\n            default: null,\n        },\n\n        btnRecharge: {\n            type: cc.Node,\n            default: null,\n        },\n\n        btnCreateRoom: {\n            type: cc.Node,\n            default: null,\n        },\n\n        noChose: {\n            type: cc.Node,\n            default: null,\n        },\n\n        btnClose: {\n            type: cc.Node,\n            default: null,\n        },\n\n        fangFeiShuoming: {\n            type: cc.Label,\n            default: null,\n        },\n\n        numLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        numTitleLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        labelModel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        needCard: {\n            type: cc.Label,\n            default: null,\n        },\n\n        currentCardLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        needCard: {\n            type: cc.Label,\n            default: null,\n        },\n\n        fangFei: {\n            type: cc.Node,\n            default: null,\n        },\n\n        renShu: {\n            type: cc.Node,\n            default: null,\n        },\n\n        moShi: {\n            type: cc.Node,\n            default: null,\n        },\n\n        teShu: {\n            type: cc.Node,\n            default: null,\n        },\n\n        storePre: {\n            type: cc.Prefab,\n            default: null,\n        },\n    },\n\n    onLoad () {\n        this._juShu = MinJuShu;\n        this._quanShu = MinQuanShu;\n        this._model = ModelEnum.Ju;\n        this._hasCard = 0;\n        this._needCard = 0;\n\n        this.btnAdd.on('click', this.onBtnAddClick, this);\n        this.btnMinus.on('click', this.onBtnMinusClick, this);\n        this.btnQuan.on('click', this.onBtnQuanClick, this);\n        this.btnJu.on('click', this.onBtnJuClick, this);\n        this.btnRecharge.on('click', this.onBtnRechargeClick, this);\n        this.btnCreateRoom.on('click', this.onBtnCreateRoomClick, this);\n        this.btnClose.on('click', this.onBtnCloseClick, this);\n\n        let createInfo = fun.utils.getCreateRoomData(gameConst.gameType.digFlower);\n        if (createInfo) {\n            this.setToggleChecked('fangFei', createInfo.reduceCard);\n            this.setToggleChecked('renShu', createInfo.playerNum - 1);\n            this.setToggleChecked('moShi', createInfo.patterns);\n            this.teShu.getChildByName('toggle1').getComponent(cc.Toggle).isChecked = createInfo.needLocation;\n            if (createInfo.makersType === ModelEnum.Quan) {\n                this._quanShu = createInfo.ring;\n                this.btnQuan.getComponent(cc.Toggle).isChecked = true;\n                this.btnJu.getComponent(cc.Toggle).isChecked = false;\n                this.onBtnQuanClick();\n            } else {\n                this._juShu = createInfo.roomNum;\n                this.btnQuan.getComponent(cc.Toggle).isChecked = false;\n                this.btnJu.getComponent(cc.Toggle).isChecked = true;\n                this.onBtnJuClick();\n            }\n        }\n\n        this.animation = this.node.getComponent(cc.Animation);\n        this.clips = this.animation.getClips();\n\n        this.needCard.string = this._needCard;\n    },\n\n    onEnable () {\n        this.animation.play(this.clips[0].name);\n    },\n\n    setToggleChecked : function (name, value) {\n        for (let i = 0; i < this[name].children.length; ++i) {\n            this[name].getChildByName('toggle' + (i+1)).getComponent(cc.Toggle).isChecked = false;\n        }\n        this[name].getChildByName('toggle'+value).getComponent(cc.Toggle).isChecked = true;\n    },\n\n    onBtnCloseClick () {\n        Audio.playEffect('hall', 'button_close.mp3');\n        this.animation.play(this.clips[1].name).once('finished', function(){\n            this.node.destroy();\n        }, this);\n    },\n\n    onBtnAddClick() {\n        let needCard = this._needCard;\n        switch (this._model) {\n            case ModelEnum.Quan:\n                if (this._quanShu >= MaxQuanShu) {\n                    return;\n                }\n                this._quanShu += 1;\n                this.numLabel.string = this._quanShu;\n                needCard = this._quanShu * PerQuanCard;\n                this.noChose.active = needCard > this._hasCard;\n                this.needCard.string = needCard;\n                break;\n            case ModelEnum.Ju:\n                if (this._juShu >= MaxJuShu) {\n                    return;\n                }\n                this._juShu *= 2;\n                this.numLabel.string = this._juShu;\n                needCard = this._juShu * PerJuCard;\n                this.noChose.active = needCard > this._hasCard;\n                this.needCard.string = needCard;\n                break;\n        }\n    },\n\n    onBtnMinusClick() {\n        let needCard = this._needCard;\n        switch (this._model) {\n            case ModelEnum.Quan:\n                if (this._quanShu <= MinQuanShu) {\n                    return;\n                }\n                this._quanShu -= 1;\n                this.numLabel.string = this._quanShu;\n                needCard = this._quanShu * PerQuanCard;\n                this.noChose.active = needCard > this._hasCard;\n                this.needCard.string = this._quanShu * PerQuanCard;\n                break;\n            case ModelEnum.Ju:\n                if (this._juShu <= MinJuShu) {\n                    return;\n                }\n                this._juShu /= 2;\n                this.numLabel.string = this._juShu;\n                needCard = this._juShu * PerJuCard;\n                this.noChose.active = needCard > this._hasCard;\n                this.needCard.string = needCard;\n                break;\n        }\n    },\n\n    onBtnQuanClick() {\n        this._model = ModelEnum.Quan;\n        this.numTitleLabel.string = '圈';\n        this.labelModel.string = \"选择游戏总圈数\";\n        this.numLabel.string = this._quanShu;\n        let needCard = this._quanShu * PerQuanCard;\n        this.noChose.active = needCard > this._hasCard;\n        this.needCard.string = needCard;\n    },\n\n    onBtnJuClick() {\n        this._model = ModelEnum.Ju;\n        this.numTitleLabel.string = '局';\n        this.labelModel.string = \"选择游戏总局数\";\n        this.numLabel.string = this._juShu;\n        let needCard = this._juShu * PerJuCard;\n        this.noChose.active = needCard > this._hasCard;\n        this.needCard.string = needCard;\n    },\n\n    onBtnRechargeClick() {\n        cc.instantiate(this.storePre).parent = this.node;\n    },\n\n    onBtnCreateRoomClick() {\n        let req = {\n            GameType: gameConst.gameType.digFlower,\n            Address: fun.db.getData('UserInfo').location,\n            makersType: this._model,\n            playerNum: 4,\n            reduceCard: 1,\n            patterns: 1,\n            needLocation: this.teShu.getChildByName('toggle1').getComponent(cc.Toggle).isChecked,\n        };\n        this.fangFei.children.forEach(function(value) {\n            if (value.getComponent(cc.Toggle).isChecked) {\n                req.reduceCard = parseInt(value.name.substring(value.name.length - 1));\n            }\n        });\n        this.renShu.children.forEach(function(value) {\n            if (value.getComponent(cc.Toggle).isChecked) {\n                req.playerNum = parseInt(value.name.substring(value.name.length - 1)) + 1;\n            }\n        });\n        this.moShi.children.forEach(function(value) {\n            if (value.getComponent(cc.Toggle).isChecked) {\n                req.patterns = parseInt(value.name.substring(value.name.length - 1));\n            }\n        });\n        if (this._model === ModelEnum.Quan) {\n            req.ring = this._quanShu;\n        } else {\n            req.roomNum = this._juShu;\n        }\n        fun.utils.saveCreateRoomData(req);\n        fun.event.dispatch('Zhuanquan', {flag: true, text: \"创建房间中，请稍后...\"});\n        fun.net.pSend('CreateRoom', req, function(rsp) {\n            if (rsp.RetCode && rsp.RetCode !== 0) {\n                fun.event.dispatch('Zhuanquan', {flag: false});\n                return;\n            }\n            if (rsp.returnStatu && rsp.returnStatu !== 1) {\n                fun.event.dispatch('Zhuanquan', {flag: false});\n                return;\n            }\n            fun.db.setData('RoomInfo', rsp);\n            cc.director.loadScene('wahua');\n        });\n    },\n});\n"]}