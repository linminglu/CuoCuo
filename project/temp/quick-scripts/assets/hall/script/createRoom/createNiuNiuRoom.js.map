{"version":3,"sources":["createNiuNiuRoom.js"],"names":["PukeDefine","require","PukeUtils","Audio","WanFaEnum","cc","Enum","kanDou","wuHua","zhaDan","wuXiao","SpecialEnum","xianJia","joinLimit","zhangSuo","shunDou","Class","extends","Component","properties","FangFei","Node","JuShu","Label","CurrentCard","RoomCard","DingZhuang","DiFen","ShiXian","TeShu","WanFa","BeiShu","btnHitzone","onLoad","fun","gameCfg","releaseType","gameConst","apple","down","node","getChildByName","active","createN","ListBack","BeiShuText","getComponent","string","NIUNIU_ROOM_INFO","TYPE_SCORE","i","children","length","content","j","contentL","setBeiShuBackActive","createInfo","utils","getCreateRoomData","gameType","niuNiu","setToggleChecked","reduceCard","makersType","bottomScore","timeLimit","typeScore","roomNum","setMuToggleNotChecked","key","Special","k","Toggle","isChecked","KanDou","ShunDou","isShunDouShow","downAction","animation","Animation","clips","getClips","onEnable","play","name","value","num","back","parseInt","niuBtnBeiShuList","listAction","isDown","position","x","y","moveto","moveTo","easing","easeSineInOut","stopAllActions","runAction","onBtnHitzoneClicked","niuChooseBeiShu","sender","onBtnLessClicked","playEffect","juShu","CREATE_JUSHU_MIN","CREATE_JUSHU_SPACE","onBtnAddClicked","CREATE_JUSHU_MAX","onBtnCreateClicked","data","togFF","togDF","togSX","togTS","NIU_SPECIAL","togWF","togDZ","typeScoreText","Address","db","getData","location","GameType","Zone","event","dispatch","net","pSend","rsp","returnStatu","undefined","EnterRoom","setData","saveCreateRoomData","director","preloadScene","loadScene","RetCode","contentStr","log","bind","onBtnKanDouClicked","onBtnRechargeClicked","onBtnCloseClick","once","destroy"],"mappings":"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","file":"createNiuNiuRoom.js","sourceRoot":"../../../../../../assets/hall/script/createRoom","sourcesContent":["let PukeDefine = require('PukeDefine');\nlet PukeUtils = require('PukeUtils');\nlet Audio = require('Audio');\nlet WanFaEnum = cc.Enum({\n    kanDou: 1,\n    wuHua: 2,\n    zhaDan: 3,\n    wuXiao: 4,\n});\nlet SpecialEnum = cc.Enum({\n    xianJia: 1,\n    joinLimit: 2,\n    zhangSuo: 3,\n    shunDou: 4\n});\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        FangFei     : cc.Node,\n        JuShu       : cc.Label,\n        CurrentCard : cc.Label,\n        RoomCard    : cc.Label,\n        DingZhuang  : cc.Node,\n        DiFen       : cc.Node,\n        ShiXian     : cc.Node,\n        TeShu       : cc.Node,\n        WanFa       : cc.Node,\n        BeiShu      : cc.Node,\n        btnHitzone  : cc.Node,\n    },\n\n    onLoad () {\n        if(fun.gameCfg.releaseType === gameConst.releaseType.apple){\n            let down = this.node.getChildByName('back').getChildByName('down');\n            down.getChildByName('btnRecharge').active = false;\n            let createN = down.getChildByName('btnCreateRoom');\n            createN.getChildByName('text').active = false;\n            createN.getChildByName('num').active = false;\n        }\n        this.ListBack   = this.BeiShu.getChildByName(\"list\").getChildByName(\"listback\");\n        this.BeiShuText = this.BeiShu.getChildByName(\"initLabel\").getComponent(cc.Label);\n        this.BeiShuText.string = PukeDefine.NIUNIU_ROOM_INFO.TYPE_SCORE[0];\n        for (let i = 0; i < this.ListBack.children.length; ++i) {\n            let content = this.ListBack.getChildByName('content');\n            for (let j in content.children) {\n                let contentL = content.children[j].getComponent(cc.Label);\n                contentL.string = PukeDefine.NIUNIU_ROOM_INFO.TYPE_SCORE[j];\n            }\n        }\n        this.setBeiShuBackActive(1);\n        let createInfo = fun.utils.getCreateRoomData(gameConst.gameType.niuNiu);\n        if (createInfo) {\n            this.setToggleChecked('FangFei', createInfo.reduceCard);\n            this.setToggleChecked('DingZhuang', createInfo.makersType);\n            this.setToggleChecked('DiFen', createInfo.bottomScore);\n            this.setToggleChecked('ShiXian', createInfo.timeLimit + 1);\n            this.BeiShuText.string = PukeDefine.NIUNIU_ROOM_INFO.TYPE_SCORE[createInfo.typeScore-1];\n            this.setBeiShuBackActive(createInfo.typeScore);\n            this.JuShu.string = (createInfo.roomNum + 1) * 5;\n            this.setMuToggleNotChecked();\n            for (let key in createInfo.Special) {\n                for (let k in WanFaEnum) {\n                    if (key === k) {\n                        this.WanFa.getChildByName('toggle'+WanFaEnum[k]).getComponent(cc.Toggle).isChecked = true;\n                    }\n                }\n                for (let k in SpecialEnum) {\n                    if (key === k) {\n                        this.TeShu.getChildByName('toggle'+SpecialEnum[k]).getComponent(cc.Toggle).isChecked = true;\n                    }\n                }                \n            }\n        }\n        this.RoomCard.string = this.JuShu.string;\n        \n        this.KanDou  = this.WanFa.getChildByName(\"toggle1\").getComponent(cc.Toggle);\n        this.ShunDou = this.TeShu.getChildByName(\"toggle4\");\n        this.isShunDouShow(this.KanDou.isChecked);\n        this.downAction = false;\n\n        this.animation = this.node.getComponent(cc.Animation);\n        this.clips = this.animation.getClips();\n    },\n\n    onEnable () {\n        this.animation.play(this.clips[0].name);\n    },\n\n    setToggleChecked : function (name, value) {\n        for (let i = 0; i < this[name].children.length; ++i) {\n            this[name].getChildByName('toggle' + (i+1)).getComponent(cc.Toggle).isChecked = false;\n        }\n        this[name].getChildByName('toggle'+value).getComponent(cc.Toggle).isChecked = true;\n    },\n\n    setMuToggleNotChecked : function () {\n        for (let i = 0; i < this.WanFa.children.length; ++i){\n            this.WanFa.getChildByName('toggle'+(i+1)).getComponent(cc.Toggle).isChecked = false;\n        }\n        for (let i = 0; i < this.TeShu.children.length; ++i){\n            this.TeShu.getChildByName('toggle'+(i+1)).getComponent(cc.Toggle).isChecked = false;\n        }\n    },\n\n    setBeiShuBackActive : function (num) {\n        let back = this.ListBack.getChildByName('back')\n        for (let i in back.children) {\n            back.children[i].active = false;\n        }\n        back.getChildByName('back'+parseInt(num)).active = true;\n    },\n\n    // 牛牛倍数下拉列表\n    niuBtnBeiShuList : function () {\n        this.listAction(this.downAction);\n    },\n    listAction : function (isDown) {\n        this.downAction = !this.downAction;\n        this.btnHitzone.active = !isDown;\n        let position = { x : 0, y : 220 };\n        if (!isDown) { position.y = 0; }\n        let moveto = cc.moveTo(0.3, position);\n        moveto.easing(cc.easeSineInOut());\n        this.ListBack.stopAllActions();\n        this.ListBack.runAction(moveto);\n    },\n    onBtnHitzoneClicked: function(){\n        this.btnHitzone.active = false;\n        this.listAction(true);\n    },\n    // 牛牛选择倍数\n    niuChooseBeiShu : function (sender, num) {\n        this.BeiShuText.string = PukeDefine.NIUNIU_ROOM_INFO.TYPE_SCORE[parseInt(num)-1];\n        this.setBeiShuBackActive(num);\n        this.listAction(true);\n    },\n\n    // 减少局数\n    onBtnLessClicked : function () {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        let juShu = parseInt(this.JuShu.string);\n        if (juShu > PukeDefine.CREATE_JUSHU_MIN) {\n            this.JuShu.string = juShu - PukeDefine.CREATE_JUSHU_SPACE;\n            this.RoomCard.string = this.JuShu.string;\n        }\n    },\n\n    // 增加局数\n    onBtnAddClicked : function () {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        let juShu = parseInt(this.JuShu.string);\n        if (juShu < PukeDefine.CREATE_JUSHU_MAX) {\n            this.JuShu.string = juShu + PukeDefine.CREATE_JUSHU_SPACE;\n            this.RoomCard.string = this.JuShu.string;\n        }\n    },\n\n    // 牛牛创建房间\n    onBtnCreateClicked : function () {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        let data = {};\n        data.Special = {};\n        for (let i=1; i<=2; i++) {\n            let togFF = this.FangFei.getChildByName(\"toggle\"+i).getComponent(cc.Toggle);\n            if (togFF.isChecked) {\n                data.reduceCard = i; //房费\n            }\n        }\n        for (let i=1; i<=4; i++) {\n            let togDF = this.DiFen.getChildByName(\"toggle\"+i).getComponent(cc.Toggle);\n            if (togDF.isChecked) {\n                data.bottomScore = i; //底分\n            }\n            let togSX = this.ShiXian.getChildByName(\"toggle\"+i).getComponent(cc.Toggle);\n            if (togSX.isChecked) {\n                data.timeLimit = i-1; //时限\n            }\n            let togTS = this.TeShu.getChildByName(\"toggle\"+i).getComponent(cc.Toggle);\n            if (togTS.isChecked) {\n                let name = PukeDefine.NIUNIU_ROOM_INFO.NIU_SPECIAL[i - 1 + 4];\n                data.Special[name] = 1; //特殊\n            }\n            let togWF = this.WanFa.getChildByName(\"toggle\"+i).getComponent(cc.Toggle);\n            if (togWF.isChecked) {\n                let name = PukeDefine.NIUNIU_ROOM_INFO.NIU_SPECIAL[i - 1];\n                data.Special[name] = 1; //玩法\n            }\n        }\n        for (let i=1; i<=5; i++) {\n            let togDZ = this.DingZhuang.getChildByName(\"toggle\"+i).getComponent(cc.Toggle);\n            if (togDZ.isChecked) {\n                data.makersType = i; //定庄\n            }\n        }\n        let typeScore = PukeDefine.NIUNIU_ROOM_INFO.TYPE_SCORE;\n        let typeScoreText = this.BeiShuText.string;\n        for (let i in typeScore) {\n            if (typeScoreText === typeScore[parseInt(i)]) {\n                data.typeScore = parseInt(i)+1; //倍数\n            }\n        }\n        data.Address  = fun.db.getData('UserInfo').location;\n        data.GameType = gameConst.gameType.niuNiu; //游戏种类 - 牛牛\n        data.Zone     = 0; //是否分区\n        data.roomNum  = parseInt(this.JuShu.string)/5 - 1; //总局数\n        fun.event.dispatch('Zhuanquan', true);\n        fun.net.pSend('CreateRoom', data, function(rsp){\n            fun.event.dispatch('Zhuanquan', false);\n            if (rsp.returnStatu !== undefined && rsp.returnStatu === 1) {\n                rsp.EnterRoom = 'create';\n                fun.db.setData('RoomInfo', rsp);\n                fun.utils.saveCreateRoomData(data);\n                cc.director.preloadScene('puke', function(){\n                    fun.event.dispatch('Zhuanquan', false);\n                    cc.director.loadScene('puke');\n                })\n            } else {\n                fun.event.dispatch('Zhuanquan', false);\n                if (rsp.RetCode !== undefined && rsp.RetCode === 10) {\n                    fun.event.dispatch('MinSingleButtonPop', {contentStr: '服务未开启'});\n                    fun.log('createNiuNiuRoom', `CreateRoom RetCode = ${rsp.RetCode}`);\n                    return;\n                }\n                if (rsp.returnStatu === undefined || rsp.returnStatu === 2) {\n                    fun.event.dispatch('MinSingleButtonPop', {contentStr: '用户参数异常'});\n                } else if (rsp.returnStatu === 3) {\n                    fun.event.dispatch('MinSingleButtonPop', {contentStr: '房卡不足'});\n                } else {\n                    fun.event.dispatch('MinSingleButtonPop', {contentStr: '创建房间失败'});\n                }\n                fun.log('createNiuNiuRoom', `CreateRoom returnStatu = ${rsp.returnStatu}`);\n            }\n        }.bind(this));\n    },\n\n    isShunDouShow : function (isChecked) {\n        this.ShunDou.getComponent(cc.Toggle).isChecked = isChecked;\n        this.ShunDou.getChildByName(\"mask\").active = !isChecked;\n    },\n\n    // 选择坎斗\n    onBtnKanDouClicked : function () {\n        this.isShunDouShow(this.KanDou.isChecked);\n    },\n\n    // 房卡充值\n    onBtnRechargeClicked () {\n        Audio.playEffect('hall', 'button_nomal.mp3');\n        cc.log('房卡充值')\n    },\n\n    onBtnCloseClick () {\n        Audio.playEffect('hall', 'button_close.mp3');\n        this.animation.play(this.clips[1].name).once('finished', function(){\n            this.node.destroy();\n        }, this);\n    }\n});\n"]}