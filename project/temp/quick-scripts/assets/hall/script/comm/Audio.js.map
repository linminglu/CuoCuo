{"version":3,"sources":["Audio.js"],"names":["hall_EffectPath","hall_MusicPath","Pork_EffectPath","Pork_MusicPath","Mahjong_EffectPath","Mahjong_MusicPath","module","exports","playMusic","from","name","loop","volume","m_loop","undefined","m_volume","getMusicVolume","stopMusic","path","_musicId","cc","audioEngine","play","pauseMusic","pause","resumeMusic","resume","stop","setMusicVolume","setVolume","fun","gameCfg","musicValume","isMusicPlaying","getState","AudioState","PLAYING","playEffect","pName","sex","more","sys","isNative","slice","gameType","db","getData","GameType","jsb","fileUtils","isFileExist","_soundId","getEffectVolume","err","pauseEffect","resumeEffect","stopEffect","setEffectVolume","_soundVolume","setEffectIsPlay","isPlay","_isEffectPlay","soundValume","s","sound","pauseAll","resumeAll","stopAll"],"mappings":"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","file":"Audio.js","sourceRoot":"../../../../../../assets/hall/script/comm","sourcesContent":["let hall_EffectPath    = 'res/raw-assets/resources/hall/audio/sound/';\nlet hall_MusicPath     = 'res/raw-assets/resources/hall/audio/music/';\nlet Pork_EffectPath    = 'res/raw-assets/resources/poker/audio/sound/';\nlet Pork_MusicPath     = 'res/raw-assets/resources/poker/audio/music/';\nlet Mahjong_EffectPath = 'res/raw-assets/resources/mahjong/audio/sound/';\nlet Mahjong_MusicPath  = 'res/raw-assets/resources/mahjong/audio/music/';\n\nmodule.exports = {\n\t\n\tplayMusic: function(from, name, loop, volume){\n\t\tlet m_loop = loop === undefined ? true : loop;\n\t\tlet m_volume = volume === undefined ? this.getMusicVolume() : volume;\n\t\tthis.stopMusic();\n\t\tlet path;\n\t\tif (from === 'hall') {\n\t\t\tpath = hall_MusicPath + name;\n\t\t} else if (from === 'pork') {\n\t\t\tpath = Pork_MusicPath + name;\n\t\t} else if (from === 'mahjong') {\n\t\t\tpath = Mahjong_MusicPath + name\n\t\t}\n\t\tthis._musicId = cc.audioEngine.play(path, m_loop, m_volume);\n\t},\n\tpauseMusic: function(){\n\t\tif(this._musicId !== undefined){\n\t\t\tcc.audioEngine.pause(this._musicId);\n\t\t}\n\t},\n\tresumeMusic: function(){\n\t\tif(this._musicId !== undefined){\n\t\t\tcc.audioEngine.resume(this._musicId);\n\t\t}\n\t},\n\tstopMusic: function(){\n\t\tif(this._musicId !== undefined){\n\t\t\tcc.audioEngine.stop(this._musicId);\n\t\t}\n\t},\n\tsetMusicVolume: function(volume){\n\t\tif (volume >= 0 && volume <= 1) {\n\t\t\tif(this._musicId !== undefined){\n\t\t\t\tcc.audioEngine.setVolume(this._musicId, volume);\n\t\t\t}\n\t\t}\n\t},\n\tgetMusicVolume: function(){\n\t\treturn fun.gameCfg.musicValume;\n\t},\n\tisMusicPlaying: function(){\n\t\treturn cc.audioEngine.getState(this._musicId) === cc.audioEngine.AudioState.PLAYING;\n\t},\n\n\t//more 是后缀 有些音效有多条\n\tplayEffect: function(from, pName, sex, more=''){\n\t\tlet path;\n\t\tlet name = (cc.sys.isNative) ? pName.slice(0, -4) + more + \".mp3\" : pName;\n\t\tif (from === 'hall') {\n\t\t\tpath = hall_EffectPath + name;\n\t\t} else if (from === 'pork') {\n\t\t\tpath = sex === undefined ? (Pork_EffectPath+name) : Pork_EffectPath+'mandarin/'+sex+'_'+name;\n\t\t} else if (from === 'mahjong') {\n\t\t\tlet gameType = fun.db.getData('RoomInfo').GameType;\n\t\t\tpath = !sex ? (Mahjong_EffectPath+name) : Mahjong_EffectPath+sex+name;\n\t\t}\n\t\tif(cc.sys.isNative && !jsb.fileUtils.isFileExist(path)){\n\t\t\tthis.playEffect(from, pName, sex)\n\t\t\treturn\n\t\t}\n\t\ttry{\n\t\t\tthis._soundId = cc.audioEngine.play(path, false, this.getEffectVolume());\n\t\t}catch(err){\n\n\t\t}\n\t\t\n\t},\n\tpauseEffect: function(){\n\t\tif(this._soundId !== undefined){\n\t\t\tcc.audioEngine.pause(this._soundId);\n\t\t}\n\t},\n\tresumeEffect: function(){\n\t\tif(this._soundId !== undefined){\n\t\t\tcc.audioEngine.resume(this._soundId);\n\t\t}\n\t},\n\tstopEffect: function(){\n\t\tif(this._soundId !== undefined){\n\t\t\tcc.audioEngine.stop(this._soundId);\n\t\t}\n\t},\n\tsetEffectVolume: function(volume){\n\t\tif (volume >= 0 && volume <= 1) {\n\t\t\tthis._soundVolume = volume;\n\t\t}\n\t},\n\tsetEffectIsPlay: function(isPlay){\n\t\tthis._isEffectPlay = isPlay;\n\t},\n\tgetEffectVolume: function(){\n\t\tif (!this._isEffectPlay) return fun.gameCfg.soundValume;\n\t\tlet s = this._soundVolume;\n\t\tlet sound = s ? s : (s === 0 ? s : fun.gameCfg.soundValume);\n\t\treturn sound;\n\t},\n\n\tpauseAll: function(){\n\t\tthis.setEffectIsPlay(false);\n\t\tcc.audioEngine.pauseAll();\n\t},\n\tresumeAll: function(){\n\t\tthis.setEffectIsPlay(true);\n\t\tcc.audioEngine.resumeAll();\n\t},\n\tstopAll: function(){\n\t\tcc.audioEngine.stopAll();\n\t},\n\n};"]}