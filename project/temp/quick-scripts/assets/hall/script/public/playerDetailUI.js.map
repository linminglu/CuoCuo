{"version":3,"sources":["playerDetailUI.js"],"names":["Audio","require","cc","Class","extends","Component","properties","emojiListN","Node","onLoad","initNode","isCdTime","basicInfoN","node","getChildByName","on","close","animation","getComponent","Animation","clips","getClips","btnLocation","showLocationDetail","children","forEach","child","event","interactData","content","name","sendInteract","bind","show","playerData","onMapCB","initBasicInfo","playEffect","play","once","destroy","onEnable","nameL","Label","idL","addrL","string","id","addr","active","isNoLocation","isSelf","from","selfUid","to","curUid","chatType","setTimeout","fun","net","pSend","update","dt"],"mappings":"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","file":"playerDetailUI.js","sourceRoot":"../../../../../../assets/hall/script/public","sourcesContent":["let Audio = require('Audio');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        emojiListN : cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n\n    },\n\n    initNode(){\n        this.isCdTime    = false;\n        this.basicInfoN  = this.node.getChildByName(\"back\").getChildByName(\"content\")\n        this.node.getChildByName(\"hitzone\").on(\"touchend\", this.close, this);\n        this.animation   = this.node.getComponent(cc.Animation);\n        this.clips       = this.animation.getClips();\n        this.btnLocation = this.basicInfoN.getChildByName(\"btnPosDetail\");\n        this.node.getChildByName(\"hitzone\").on(\"touchend\", this.close, this);\n        this.btnLocation.on(\"touchend\", this.showLocationDetail, this);\n        this.emojiListN.children.forEach(function (child) {\n            child.on(\"touchend\", function(event){\n                //Hongbao Xueqiu Bianpao Yan Hua Wen Jidan Tuoxie Shoulei\n                //the node name be corresponding to animation name, please don't change the node name\n                this.interactData.content = child.name;\n                this.sendInteract();\n            }, this)\n        }.bind(this))\n    },\n\n    show(playerData, onMapCB){\n        this.initNode();\n        this.initBasicInfo(playerData);\n        this.onMapCB = onMapCB;\n    },\n\n    close(){\n        Audio.playEffect('hall', 'button_close.mp3');\n        this.animation.play(this.clips[1].name).once('finished', function () {\n            this.node.destroy();\n        }, this);\n    },\n\n    onEnable () {\n        this.animation.play(this.clips[0].name);\n    },\n\n\n    initBasicInfo(playerData){\n        var nameL    = this.basicInfoN.getChildByName(\"name\").getComponent(cc.Label);\n        var idL      = this.basicInfoN.getChildByName(\"id\").getComponent(cc.Label);\n        // var iconN    = this.basicInfoN.getChildByName(\"icon\");\n        var addrL    = this.basicInfoN.getChildByName(\"addr\").getComponent(cc.Label);\n        nameL.string = playerData.name;\n        idL.string   = playerData.id;\n        addrL.string = playerData.addr;\n        // fun.utils.loadUrlRes(playerData.url, iconN);\n        this.btnLocation.active = !playerData.isNoLocation;\n        this.emojiListN.active  = !playerData.isSelf;\n        this.interactData       = {from : playerData.selfUid, to : playerData.curUid, chatType: \"interact\"};\n    },\n\n    sendInteract(){\n        //prevent too fast\n        if(this.isCdTime){return}\n        this.isCdTime = true\n        setTimeout(function(){\n            this.isCdTime = false;\n        }.bind(this), 500)\n        fun.net.pSend(\"Chat\", this.interactData);\n    },\n\n    showLocationDetail(){\n        if(!this.onMapCB){return}\n        this.onMapCB();\n    },\n\n    update (dt) {},\n});\n"]}