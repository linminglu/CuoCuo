{"version":3,"sources":["interact.js"],"names":["interactCfg","node","Audio","require","cc","Class","extends","Component","properties","start","show","data","startWorldPos","endWoldPos","hideAll","startPos","convertToNodeSpaceAR","endPos","nodeName","content","animNode","getChildByName","active","setPosition","spAnim","getComponent","sp","Skeleton","moveTime","pDistance","moveAct","sequence","moveTo","callFunc","playEffect","moveActEnd","bind","runAction","setAnimation","children","forEach","child","setCompleteListener","close","removeFromParent"],"mappings":";;;;;;AAAA,IAAMA,cAAc;AAChB,aAAW,EAACC,MAAK,QAAN,EADK;AAEhB,cAAW,EAACA,MAAK,QAAN,EAFK;AAGhB,WAAW,EAACA,MAAK,QAAN,EAHK;AAIhB,WAAW,EAACA,MAAK,QAAN,EAJK;AAKhB,eAAW,EAACA,MAAK,QAAN,EALK;AAMhB,eAAW,EAACA,MAAK,QAAN,EANK;AAOhB,cAAW,EAACA,MAAK,QAAN,EAPK;AAQhB,eAAW,EAACA,MAAK,QAAN,EARK;AAShB,WAAW,EAACA,MAAK,QAAN;AATK,CAApB;AAWA,IAAIC,QAAQC,QAAQ,OAAR,CAAZ;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;AAML;;AAEAC,SARK,mBAQI,CAER,CAVI;;AAWL;;AAEAC,QAbK,gBAaAC,IAbA,EAaMC,aAbN,EAaqBC,UAbrB,EAagC;AACjC,aAAKC,OAAL;AACA,YAAIC,WAAmB,KAAKd,IAAL,CAAUe,oBAAV,CAA+BJ,aAA/B,CAAvB;AACA,YAAIK,SAAmB,KAAKhB,IAAL,CAAUe,oBAAV,CAA+BH,UAA/B,CAAvB;AACA,YAAIK,WAAmBlB,YAAYW,KAAKQ,OAAjB,EAA0BlB,IAAjD;AACA,aAAKmB,QAAL,GAAuB,KAAKnB,IAAL,CAAUoB,cAAV,CAAyBH,QAAzB,CAAvB;AACA,aAAKE,QAAL,CAAcE,MAAd,GAAuB,IAAvB;AACA,aAAKF,QAAL,CAAcG,WAAd,CAA0BR,QAA1B;AACA,aAAKS,MAAL,GAAuB,KAAKJ,QAAL,CAAcK,YAAd,CAA2BC,GAAGC,QAA9B,CAAvB;AACA,YAAIC,WAAmBxB,GAAGyB,SAAH,CAAad,QAAb,EAAuBE,MAAvB,IAA+B,IAAtD;AACA,YAAIa,UAAmB1B,GAAG2B,QAAH,CAAY3B,GAAG4B,MAAH,CAAUJ,QAAV,EAAoBX,MAApB,CAAZ,EAAyCb,GAAG6B,QAAH,CAAY,YAAU;AAClF/B,kBAAMgC,UAAN,CAAiB,MAAjB,EAAyBvB,KAAKQ,OAAL,GAAe,MAAxC;AACA,iBAAKgB,UAAL,CAAgBxB,IAAhB;AACH,SAH2E,CAG1EyB,IAH0E,CAGrE,IAHqE,CAAZ,CAAzC,CAAvB;AAIA,aAAKhB,QAAL,CAAciB,SAAd,CAAwBP,OAAxB;AACA,aAAKN,MAAL,CAAYc,YAAZ,CAAyB,CAAzB,EAA4B3B,KAAKQ,OAAL,GAAc,MAA1C,EAAkD,IAAlD;AACH,KA7BI;AA+BLL,WA/BK,qBA+BI;AACL,aAAKb,IAAL,CAAUsC,QAAV,CAAmBC,OAAnB,CAA2B,UAASC,KAAT,EAAe;AACtCA,kBAAMnB,MAAN,GAAe,KAAf;AACH,SAFD;AAGH,KAnCI;AAqCLa,cArCK,sBAqCMxB,IArCN,EAqCW;AACZ,aAAKa,MAAL,CAAYkB,mBAAZ,CAAgC,KAAKC,KAAL,CAAWP,IAAX,CAAgB,IAAhB,CAAhC;AACA,aAAKZ,MAAL,CAAYc,YAAZ,CAAyB,CAAzB,EAA4B3B,KAAKQ,OAAL,GAAc,MAA1C,EAAkD,KAAlD;AACH,KAxCI;AA0CLwB,SA1CK,mBA0CE;AACH,aAAK1C,IAAL,CAAU2C,gBAAV;AACH;AA5CI,CAAT","file":"interact.js","sourceRoot":"../../../../../../assets/hall/script/public","sourcesContent":["const interactCfg = {\n    \"Jidan\"  : {node:\"liwu_0\"},\n    \"Tuoxie\" : {node:\"liwu_0\"},\n    \"Hua\"    : {node:\"liwu_1\"},\n    \"Wen\"    : {node:\"liwu_1\"},\n    \"Bianpao\": {node:\"liwu_2\"},\n    \"Hongbao\": {node:\"liwu_2\"},\n    \"Xueqiu\" : {node:\"liwu_2\"},\n    \"Shoulei\": {node:\"liwu_3\"},\n    \"Yan\"    : {node:\"liwu_3\"},\n}  \nlet Audio = require('Audio');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        \n    },\n    // onLoad () {},\n\n    start () {\n\n    },\n    // update (dt) {},\n\n    show(data, startWorldPos, endWoldPos){\n        this.hideAll();\n        var startPos         = this.node.convertToNodeSpaceAR(startWorldPos);\n        var endPos           = this.node.convertToNodeSpaceAR(endWoldPos);\n        var nodeName         = interactCfg[data.content].node\n        this.animNode        = this.node.getChildByName(nodeName);\n        this.animNode.active = true;\n        this.animNode.setPosition(startPos);\n        this.spAnim          = this.animNode.getComponent(sp.Skeleton)\n        var moveTime         = cc.pDistance(startPos, endPos)/1500;\n        var moveAct          = cc.sequence(cc.moveTo(moveTime, endPos), cc.callFunc(function(){\n            Audio.playEffect('hall', data.content + '.mp3');\n            this.moveActEnd(data);\n        }.bind(this)))\n        this.animNode.runAction(moveAct);\n        this.spAnim.setAnimation(0, data.content +\"_fei\", true);\n    },\n\n    hideAll(){\n        this.node.children.forEach(function(child){\n            child.active = false;\n        })\n    },\n\n    moveActEnd(data){\n        this.spAnim.setCompleteListener(this.close.bind(this));\n        this.spAnim.setAnimation(0, data.content +\"_dao\", false);\n    },\n\n    close(){\n        this.node.removeFromParent();\n    },\n\n\n    \n});\n"]}