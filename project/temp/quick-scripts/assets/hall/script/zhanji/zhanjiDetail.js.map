{"version":3,"sources":["zhanjiDetail.js"],"names":["typeNode","cc","Class","name","properties","gameType","type","gameConst","default","universal","titleNode","Node","extends","Component","itemTemplate","scrollView","ScrollView","spacing","timeLabe","Label","roomNumLabel","btnClose","titleNodes","onLoad","on","onBtnCloseClick","animation","node","getComponent","Animation","clips","getClips","onEnable","play","init","accountData","data","_content","content","_gameType","_uid","id","forEach","value","active","bind","string","timeStr","roomId","totalCount","_userInfo","players","player","userId","userName","url","headUrl","addItems","item","instantiate","parent","y","height","newHeight","require","playEffect","once","destroy"],"mappings":"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","file":"zhanjiDetail.js","sourceRoot":"../../../../../../assets/hall/script/zhanji","sourcesContent":["let typeNode = cc.Class({\n    name: 'typeNode',\n\n    properties: {\n        gameType: {\n            type: gameConst.gameType,\n            default: gameConst.gameType.universal,\n        },\n        titleNode: {\n            type: cc.Node,\n            default: null,\n        },\n    }\n})\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        itemTemplate: {\n            type: cc.Node,\n            default: null,\n        },\n\n        scrollView: {\n            type: cc.ScrollView,\n            default: null,\n        },\n\n        spacing: {\n            default: 0,\n        },\n\n        timeLabe: {\n            type: cc.Label,\n            default: null,\n        },\n\n        roomNumLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        btnClose: {\n            type: cc.Node,\n            default: null,\n        },\n\n        titleNodes: {\n            type: [typeNode],\n            default: [],\n        }\n    },\n\n    onLoad () {\n        this.btnClose.on('click', this.onBtnCloseClick, this);\n\n        this.animation = this.node.getComponent(cc.Animation);\n        this.clips = this.animation.getClips();\n    },\n\n    onEnable () {\n        this.animation.play(this.clips[0].name);\n    },\n\n    init(accountData, data) {\n        this._content = this.scrollView.content;\n        this._gameType = data.gameType;\n        this._uid = data.id;\n        this.titleNodes.forEach(function(value) {\n            if (value.gameType === this._gameType) {\n                value.titleNode.active = true;\n            }\n        }.bind(this));\n        this.timeLabe.string = data.timeStr;\n        this.roomNumLabel.string = data.roomId;\n        this.content = this.scrollView.content;\n        this.totalCount = 0;\n        this._userInfo = {};\n        data.players.forEach(function(player) {\n            this._userInfo[player.userId] = {name: player.userName, url: player.headUrl};\n        }.bind(this));\n        this.addItems(accountData);\n    },\n\n    addItems(data = []) {\n        data.forEach(function (value) {\n            let item = cc.instantiate(this.itemTemplate);\n            item.parent = this.content;\n            item.active = true;\n            item.getComponent('zhanjiDetailItem').init(this._uid, this._gameType, value, this._userInfo);\n            item.y = -item.height * (0.5 + this.totalCount) - this.spacing * this.totalCount;\n            this.totalCount++;\n        }, this);\n        const newHeight = this.totalCount * (this.itemTemplate.height + this.spacing) + this.spacing;\n        if (newHeight > this._content.height) {\n            this._content.height = newHeight;\n        }\n        \n    },\n\n    onBtnCloseClick() {\n        require('Audio').playEffect('hall', 'button_close.mp3');\n        this.animation.play(this.clips[1].name).once('finished', function () {\n            this.node.destroy();\n        }, this);\n    },\n\n});\n"]}