{"version":3,"sources":["JSPhoneBaiDu.js"],"names":["className","baiDu","getBaiDuLocation","cc","sys","os","OS_ANDROID","jsb","reflection","callStaticMethod","OS_IOS","reBaiDuLocation","lat","lng","locdesc","console","log","parseInt","userInfo","fun","db","getData","location","setData","getDistanceByPoints","points","fD","a","b","c","jD","Math","max","min","yk","PI","Ce","d","dO","acos","sin","cos","getDistance","p1","p2","toFixed","module","exports"],"mappings":"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","file":"JSPhoneBaiDu.js","sourceRoot":"../../../../assets/phone","sourcesContent":["let className = 'org/cocos2dx/javascript/AppActivity';\nlet baiDu = {\n\n    //-- 百度定位\n    getBaiDuLocation : function(){\n        if(cc.sys.os === cc.sys.OS_ANDROID)\n            jsb.reflection.callStaticMethod(className, 'getBaiDuLocation', '()V');\n        else if(cc.sys.os === cc.sys.OS_IOS)\n            jsb.reflection.callStaticMethod('OCPhoneBaiDu', 'getBaiDuLocation');\n    },\n\n    //-- 百度定位 返回坐标\n    reBaiDuLocation : function(lat, lng, locdesc){\n        console.log('---* JS reBaiDuLocation *---');\n        console.log('latitude:  ' + lat);\n        console.log('longitude: ' + lng);\n        console.log('locdesc:   ' + locdesc);\n        if (parseInt(lat) === 0 && parseInt(lng) === 0) {\n            return;\n        }\n        let userInfo = fun.db.getData('UserInfo');\n        userInfo.location = {lat: lat, lng: lng, locdesc: locdesc};\n        fun.db.setData('UserInfo', userInfo);\n    },\n\n    //-- 根据坐标算出两点之间的距离 lat-纬度 lng-经度\n    getDistanceByPoints: function(points){\n        /*\n         * 格式要求\n         * let points = {};\n         * info.p1 = {lat:38.915, lng:115.404};\n         * info.p2 = {lat:39.915, lng:116.404};\n         * require('JSPhoneBaiDu').getDistanceByPoints(points);\n         */\n        let fD = function(a, b, c){\n            for(; a > c;)\n                a -= c - b;\n            for(; a < b;)\n                a += c - b;\n            return a;\n        }\n        let jD = function(a, b, c){\n            b != null && (a = Math.max(a, b));\n            c != null && (a = Math.min(a, c));\n            return a;\n        }\n        let yk = function(a){\n            return Math.PI * a / 180;\n        }\n        let Ce = function(a, b, c, d){\n            let dO = 6370996.81;\n            return dO * Math.acos(Math.sin(c) * Math.sin(d) + Math.cos(c) * Math.cos(d) * Math.cos(b - a));\n        }\n        let getDistance = function(a, b){\n            if(!a || !b) return 0;\n            a.lng = fD(a.lng, -180, 180);\n            a.lat = jD(a.lat, -74, 74);\n            b.lng = fD(b.lng, -180, 180);\n            b.lat = jD(b.lat, -74, 74);\n            return Ce(yk(a.lng), yk(b.lng), yk(a.lat), yk(b.lat));\n        }\n        return getDistance(points.p1, points.p2).toFixed(1); //单位: 米\n    }\n}\n\nmodule.exports = baiDu;\n"]}