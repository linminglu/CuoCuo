{"version":3,"sources":["mjEndUI.js"],"names":["GameDefine","require","gameManager","mjDataMgr","log","cc","mjPai","Class","extends","Component","properties","endRoundN","Node","singleRoundN","totalRoundN","paiPrefab","Prefab","btnContiuneN","timeL","Label","sRoomNumL","tRoomNumL","singleShareN","totalShareN","gameNameL","onLoad","initDirectData","initSingleReport","initTotalReporte","active","roomID","get","KEYS","ROOMID","string","gameName","curPaiScale","fun","gameCfg","releaseType","gameConst","apple","animation","getComponent","Animation","clips","getClips","DirectType","DIRECTION_TYPE","directNodeName","nodeName","localText","self","refreshData","data","getChildByName","utils","getCurTime","i","nodeIndex","k","players","itemData","playerNode","winerN","normalN","isSelfPlayed","playerData","setPlayerInfo","isBigWiner","detailN","children","forEach","item","index","detail","length","itemNode","nameL","contentN","contentL","name","value","color","Color","scoreN","scoreAddNode","scoreRedNode","hasWin","winCount","cardN","leftL","speedL","Left","Spend","resultVoice","meIsWiner","checkEndMusic","initBtnContiune","gameReplayMgr","disName","isCanContinue","isReplayPai","content","setSingleWin","paiListN","fanPaiListN","dirNode","setDirectData","player","setFanAndHuCount","setHuCountData","setPaiData","setPaiFengScore","setReportTag","setFanPaiList","isby","cleanData","removeAllChildren","titleN","winN","faileN","hasMore","iconN","loadUrlRes","Icon","nameN","showName","name1N","idN","UserId","resultTagN","ishu","islz","iszm","isdp","fanNode","huNode","RichText","fanData","huData","jdHuNode","jdhs","xdHuNodeAdd","xdHuNodeRed","disXdhs","xdhs","dirIndex","FanList","undefined","paiLen","pengGangHeng","CFG","paiScale","pai","paiNode","instantiate","refresh","setPosition","p","scale","addChild","bind","paiListNode","pengGangPai","paiDataObj","shouPai","xiaType","DESKPOS_TYPE","XIA","gangPaiList","gang","pengPaiList","peng","gangLen","pengLen","shouLen","pengGangZhi","gIndex","curLen","roindex","showType","PAISHOWTYPE","PENGBY","addLen","forPos","new","hp","setShowType","PENG","setPengBgColor","infoData","pIndex","addColor","reduceColor","fengNode","nameNode","scoreNode","score","Scores","showSingleReport","show","playEffect","play","close","once","hideSingleReport","showTotalReport","stopMusic","setSingleReportData","reportData","gameUI","setTotalReportData","totalReportData","onBtnClose","onBtnExitClicked","cleanPlayerPaiData","exiteRoom","onBtnSingleShare","WxShareFriendScreen","onBtnTotalShare","onBtnContiuneClicked","gotoReadyUI","lunpanN","hideRoomOptBtn","startReady"],"mappings":"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","file":"mjEndUI.js","sourceRoot":"../../../../../../assets/mahjong/script/ui","sourcesContent":["// var utils      = require(\"utils\");\nvar GameDefine = require(\"mjGameDefine\");\nvar gameManager= require(\"mjGameManager\");\n////var Audio.      = require(\"Audio\");\nvar mjDataMgr = require(\"mjDataMgr\");\nvar log        = cc.log;\n// var FromPhone  = require(\"FromPhone\");\nvar mjPai      = require(\"mjPai\");\n\n\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        endRoundN   : cc.Node,\n        singleRoundN: cc.Node,\n        totalRoundN : cc.Node,\n        paiPrefab   : cc.Prefab,\n        btnContiuneN: cc.Node,\n        timeL       : cc.Label,\n        sRoomNumL   : cc.Label,\n        tRoomNumL   : cc.Label,\n        singleShareN: cc.Node,\n        totalShareN : cc.Node,\n        gameNameL   : cc.Label,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.initDirectData();\n        this.initSingleReport();\n        this.initTotalReporte();\n        this.endRoundN.active    = false;\n        this.singleRoundN.active = false;\n        this.totalRoundN.active  = false;\n        var roomID            = mjDataMgr.get(mjDataMgr.KEYS.ROOMID);\n        this.sRoomNumL.string = roomID;\n        this.tRoomNumL.string = roomID;\n        this.gameNameL.string =  mjDataMgr.get(\"CfgData\").gameName;\n        this.curPaiScale      = 0.8;\n        this.singleShareN.active = !(fun.gameCfg.releaseType === gameConst.releaseType.apple);\n        this.totalShareN.active = !(fun.gameCfg.releaseType === gameConst.releaseType.apple);\n        this.animation = this.endRoundN.getComponent(cc.Animation);\n        this.clips = this.animation.getClips();\n    },\n\n    initDirectData : function(){\n        var DirectType     = GameDefine.DIRECTION_TYPE;\n        var directNodeName = {};\n        directNodeName[0] = {nodeName :\"dong\", localText : \"东风\"};\n        directNodeName[1] = {nodeName :\"nan\", localText : \"南风\"};\n        directNodeName[2] = {nodeName :\"xi\", localText : \"西风\"};\n        directNodeName[3] = {nodeName :\"bei\", localText : \"北风\"};\n        this.directNodeName             = directNodeName;\n    },\n\n    initTotalReporte : function(){\n        var self = this;\n        this.totalRoundN.refreshData = function(data){\n            var timeL      = self.totalRoundN.getChildByName(\"time\").getChildByName(\"content\").getComponent(cc.Label);\n            timeL.string   = fun.utils.getCurTime();\n            for(let i=0;i<4;i++){\n                 self.totalRoundN.getChildByName(\"player_\"+i).active = false;\n            }\n            let nodeIndex = -1;\n            for(let k in  data.players){\n                nodeIndex += 1;\n                var itemData      = data.players[k];\n                var playerNode    = self.totalRoundN.getChildByName(\"player_\"+nodeIndex);\n                playerNode.active = true;\n                var winerN        = playerNode.getChildByName(\"winner\");\n                var normalN       = playerNode.getChildByName(\"normal\")\n                // 2018/3/5 美术修改，个人觉得比以前丑，可能还要修改，先保留之前的吧\n                // itemData.playerData.isSelfPlayed = true;\n                var isSelfPlayed = itemData.playerData.isSelfPlayed;\n                self.setPlayerInfo(winerN, itemData.playerData);\n                self.setPlayerInfo(normalN, itemData.playerData);\n                winerN.active = itemData.isBigWiner;\n                normalN.active = !itemData.isBigWiner;\n\n                var detailN = playerNode.getChildByName(\"detail\")\n                detailN.children.forEach(function(item, index){\n                    item.active = (index < itemData.detail.length);\n                })\n                for(let k = 0; k<itemData.detail.length; k++){\n                    let itemNode    = detailN.getChildByName(\"item_\"+k);\n                    var nameL       = itemNode.getChildByName(\"name\").getComponent(cc.Label);\n                    var contentN    = itemNode.getChildByName(\"content\");\n                    var contentL    = contentN.getComponent(cc.Label);\n                    nameL.string    = itemData.detail[k].name;\n                    contentL.string = itemData.detail[k].value;\n                    contentN.color  = isSelfPlayed ? new cc.Color(233, 39, 19) : new cc.Color(147, 50, 40);\n                }\n                var scoreN          = playerNode.getChildByName(\"totalScore\");\n                var scoreAddNode    = scoreN.getChildByName(\"score_add\");\n                var scoreRedNode    = scoreN.getChildByName(\"score_red\");\n                scoreAddNode.active = itemData.hasWin;\n                scoreRedNode.active = !itemData.hasWin;\n                scoreAddNode.getComponent(cc.Label).string = itemData.winCount;\n                scoreRedNode.getComponent(cc.Label).string = itemData.winCount;\n                \n                var cardN     = playerNode.getChildByName(\"card\");\n                var leftL     = cardN.getChildByName(\"left\").getComponent(cc.Label);\n                var speedL    = cardN.getChildByName(\"speed\").getComponent(cc.Label);\n                leftL.string  = itemData.Left;\n                speedL.string = itemData.Spend;\n                // if(winerN.isBigWiner){\n                //     var animanager = winerN.getComponent(cc.Animation);\n                //     animanager.playAdditive(\"bigwiner\");\n                // }\n            }\n            self.resultVoice = data.meIsWiner ? \"win.mp3\" : \"fail.mp3\";\n            self.checkEndMusic();\n        }\n    },\n\n    initBtnContiune : function(){\n        var gameReplayMgr = require(\"mjReplayMgr\");\n        var disName = \"继 续\";\n        if(!this.isCanContinue()){\n            disName = \"总结算\"\n        }\n        if(gameReplayMgr.isReplayPai()){\n            disName = \"退 出\"\n        }\n        var content = this.btnContiuneN.getChildByName(\"content\");\n        content.getComponent(cc.Label).string = disName;\n    },\n\n    initSingleReport : function(){\n        var self = this;\n        this.singleRoundN.refreshData = function(data){\n            self.timeL.string = fun.utils.getCurTime();\n            self.setSingleWin(self.singleRoundN, data);\n            for(let k = 0; k < 4; k++){\n                let playerNode    = self.singleRoundN.getChildByName(\"player_\"+k);\n                let itemData      = data[k];\n                playerNode.active = (itemData);\n                if(itemData){\n                    let paiListN    = playerNode.getChildByName(\"paiList\");\n                    let fanPaiListN = playerNode.getChildByName(\"fanList\");\n                    let dirNode     = playerNode.getChildByName(\"direct\");\n                    self.setPlayerInfo(playerNode, itemData.playerData, true)\n                    self.setDirectData(dirNode, itemData.player);\n                    self.setFanAndHuCount(playerNode, itemData);\n                    self.setHuCountData(playerNode, itemData);\n                    self.setPaiData(paiListN, itemData);\n                    self.setPaiFengScore(playerNode, itemData); \n                    self.setReportTag(playerNode, itemData);\n                    self.setFanPaiList(fanPaiListN, itemData);\n                    playerNode.getChildByName(\"byTips\").active = itemData.isby;\n                }\n               \n            }            \n        }\n        this.singleRoundN.cleanData = function(){\n             for(let i= 0; i < 4; i++){\n                let playerNode = self.singleRoundN.getChildByName(\"player_\"+i);\n                let paiListN   = playerNode.getChildByName(\"paiList\");\n                paiListN.removeAllChildren();\n             }\n        }\n    },\n\n    setSingleWin (singleRoundN, data){\n        var titleN    = singleRoundN.getChildByName(\"title\");\n        var winN      = titleN.getChildByName(\"win\")\n        var faileN    = titleN.getChildByName(\"fail\")\n        faileN.active = !data.meIsWiner;\n        winN.active   = data.meIsWiner; //2018/3/5 美术决定不显示赢家ui\n    },\n\n    //player base info, icon/name/direction\n    setPlayerInfo : function(playerNode, playerData, hasMore){\n        let iconN = playerNode.getChildByName(\"icon\");\n        fun.utils.loadUrlRes(playerData.Icon, iconN);\n        let nameN = playerNode.getChildByName(\"name\");\n       \n        nameN.getComponent(cc.Label).string = playerData.showName;\n        if(hasMore){\n            let name1N = playerNode.getChildByName(\"name1\");\n            name1N.getComponent(cc.Label).string   = playerData.showName;\n            nameN.active                           = !playerData.isSelfPlayed\n            name1N.active                          = playerData.isSelfPlayed\n            iconN.getChildByName(\"border\").active  = !playerData.isSelfPlayed\n            iconN.getChildByName(\"border1\").active = playerData.isSelfPlayed\n        }\n        let idN = playerNode.getChildByName(\"id\");\n        if(idN){\n            idN.getComponent(cc.Label).string = \"ID:\" + playerData.UserId;\n        }\n        playerNode.getChildByName(\"bg1\").active = playerData.isSelfPlayed;//true;\n        playerNode.getChildByName(\"bg2\").active = !playerData.isSelfPlayed;//false;\n    },\n\n    //hupai  dianpao  baoyuan lazi\n    setReportTag : function(playerNode, data){\n        var resultTagN = playerNode.getChildByName(\"resultTag\");\n        resultTagN.getChildByName(\"hu\").active   = data.ishu;\n        resultTagN.getChildByName(\"lazi\").active = data.islz;\n        resultTagN.getChildByName(\"zm\").active   = data.iszm;\n        resultTagN.getChildByName(\"by\").active   = data.isby;\n        resultTagN.getChildByName(\"dp\").active   = (!data.isby && data.isdp)\n\n        playerNode.getChildByName(\"bgFaile\").active = true;//!(data.ishu || data.iszm);\n        playerNode.getChildByName(\"bg_win\").active = false;//(data.ishu || data.iszm);\n    },\n\n    //fanshu  and hushu\n    setFanAndHuCount(playerNode, itemData){\n        var fanNode                              = playerNode.getChildByName(\"fanCount\");\n        var huNode                               = playerNode.getChildByName(\"huCount\");\n        fanNode.getComponent(cc.RichText).string = itemData.fanData;\n        huNode.getComponent(cc.RichText).string  = itemData.huData;\n    },\n\n    //xiangdui hushu  and  juedui hushu\n    setHuCountData : function (playerNode, data) {\n        data = data || {};\n        let jdHuNode                              = playerNode.getChildByName(\"totalCount\");\n        jdHuNode.active                           = !data.islz\n        jdHuNode.getComponent(cc.Label).string    = data.jdhs;\n        let xdHuNodeAdd                           = playerNode.getChildByName(\"score_add\"); //add \n        let xdHuNodeRed                           = playerNode.getChildByName(\"score_red\");//reduce\n        var disXdhs                               = data.xdhs > 0 ? \"+\" + data.xdhs : data.xdhs;\n        xdHuNodeAdd.active                        = data.xdhs > 0;\n        xdHuNodeRed.active                        = !(data.xdhs > 0);\n        xdHuNodeAdd.getComponent(cc.Label).string = disXdhs\n        xdHuNodeRed.getComponent(cc.Label).string = disXdhs\n    },\n\n    //set current player direction data\n    setDirectData : function(dirNode, player){\n        dirNode.children.forEach(function(item){\n            item.active = false;\n        })\n        var nodeName = this.directNodeName[player.dirIndex].nodeName;\n        dirNode.getChildByName(nodeName).active = true;\n    },\n\n    setFanPaiList : function(fanPaiListN, itemData){\n        fanPaiListN.active = (itemData.FanList != undefined);\n        if(!itemData.FanList){ return };\n        var paiLen       = 0;\n        var pengGangHeng = 60 *mjDataMgr.get(mjDataMgr.KEYS.CFG).paiScale *  this.curPaiScale ;\n        fanPaiListN.removeAllChildren();\n        itemData.FanList.forEach(function(pai){\n            let paiNode  = cc.instantiate(this.paiPrefab);\n            paiNode.getComponent(\"mjPaiUI\").refresh(pai);\n            paiNode.setPosition(cc.p(paiLen, 0));\n            paiNode.scale = paiNode.scale *  this.curPaiScale;\n            fanPaiListN.addChild(paiNode)\n            paiLen     += pengGangHeng;\n        }.bind(this))\n    },\n\n    //set current player pai data\n    setPaiData : function(paiListNode, data) {\n        var player        = data.player;\n        var pengGangPai   = player.paiDataObj.pengGangPai;\n        var gameReplayMgr = require(\"mjReplayMgr\");\n        var shouPai       = data.shouPai; \n        //every player's pai display as like xia player  \n        var xiaType    = GameDefine.DESKPOS_TYPE.XIA;\n\n        var gangPaiList = pengGangPai.gang;\n        var pengPaiList = pengGangPai.peng;\n        var gangLen     = 0;\n        var pengLen     = 0;\n        var shouLen     = 0;\n        var pengGangHeng  = 60 *mjDataMgr.get(mjDataMgr.KEYS.CFG).paiScale*  this.curPaiScale;\n        var pengGangZhi   = 80 *mjDataMgr.get(mjDataMgr.KEYS.CFG).paiScale*  this.curPaiScale;\n        //gang\n        for(let gIndex =0; gIndex<gangPaiList.length; gIndex ++){\n            let gang  = gangPaiList[gIndex];\n            let curLen = 0;\n            let roindex = 0;\n            for(let i =0; i < 4; i++){\n                let pai       = gang[i];\n                var paiNode   = cc.instantiate(this.paiPrefab);\n                paiNode.getComponent(\"mjPaiUI\").refresh(pai);\n                paiNode.scale = paiNode.scale *  this.curPaiScale;\n                if(i<3){\n                    paiNode.setPosition(cc.p(gangLen+curLen, 0));\n                    roindex = ((pai.showType == GameDefine.PAISHOWTYPE.PENGBY)) ? i : roindex;\n                    var addLen  = ((pai.showType == GameDefine.PAISHOWTYPE.PENGBY)) ? pengGangZhi : pengGangHeng; \n                    curLen     += addLen;\n                }\n                paiListNode.addChild(paiNode)                \n                if(i==3){\n                    var forPos = curLen - pengGangHeng * 2;\n                    forPos = (roindex != 0) ? forPos - pengGangZhi + pengGangHeng  : forPos; \n                    paiNode.setPosition(cc.p(gangLen+forPos, 6));\n                }\n            }\n            gangLen += curLen + 2; \n        }\n\n        gangLen = gangLen > 0 ? gangLen + 6 : gangLen;\n        //peng  chi\n        for(let gIndex =0; gIndex<pengPaiList.length; gIndex ++){\n           let peng  = pengPaiList[gIndex];\n           let curLen = 0;\n            for(let i =0; i < peng.length; i++){\n                let pai     = peng[i];\n                var paiNode = cc.instantiate(this.paiPrefab);\n                paiNode.getComponent(\"mjPaiUI\").refresh(pai);\n                paiNode.setPosition(cc.p(gangLen + pengLen + curLen , 0));\n                paiListNode.addChild(paiNode)\n                paiNode.scale = paiNode.scale *  this.curPaiScale;\n                var addLen  = (pai.showType == GameDefine.PAISHOWTYPE.PENGBY) ? pengGangZhi : pengGangHeng; \n                curLen         += addLen;\n            } \n            pengLen += curLen + 4; \n        }\n        pengLen = pengLen > 0 ? pengLen + 10 : pengLen;\n        //shou shang pai \n        for(let i =0; i<shouPai.length; i++){\n            var pai      = shouPai[i];\n            let paiNode  = cc.instantiate(this.paiPrefab);\n            paiNode.getComponent(\"mjPaiUI\").refresh(pai);\n            paiNode.setPosition(cc.p(gangLen + pengLen + shouLen, 0));\n            paiListNode.addChild(paiNode)\n             paiNode.scale = paiNode.scale *  this.curPaiScale;\n            shouLen     += pengGangHeng;\n        }   \n        //hupai\n        // if(data.ishu){\n        if(data.ishu || data.iszm){\n            let paiNode = cc.instantiate(this.paiPrefab);\n            var pai =  mjPai.new(data.hp); //{id : data.hp, rotate : 0};\n            pai.setShowType(GameDefine.PAISHOWTYPE.PENG);\n            paiNode.getComponent(\"mjPaiUI\").refresh(pai);\n            paiNode.scale = this.curPaiScale;\n            paiNode.setPosition(cc.p(gangLen + pengLen + shouLen + 20, 0));\n            paiNode.getComponent(\"mjPaiUI\").setPengBgColor(new cc.Color(255, 206, 206))\n            paiListNode.addChild(paiNode)\n        }\n    },\n\n    //和其他风玩家的分数\n    setPaiFengScore : function(playerNode, infoData){\n        let pIndex      = infoData.player.dirIndex;\n        //2018/3/5 美术决定只显示一种颜色\n        var addColor    = new cc.Color(180, 160, 122)//new cc.Color(211, 200, 28);\n        var reduceColor = new cc.Color(180, 160, 122)//new cc.Color(25, 167, 219);\n        let nodeIndex = 0;\n        for(i=0; i<4;i++){\n            if(i == pIndex){\n                continue;\n            }\n            let fengNode = playerNode.getChildByName(\"feng_\"+nodeIndex);\n            let nameNode = fengNode.getChildByName(\"name\");\n            let scoreNode= fengNode.getChildByName(\"content\");\n            nodeIndex    += 1;\n            var score    = infoData.Scores[ i ] || 0;\n            nameNode.getComponent(cc.Label).string  = this.directNodeName[i].localText;\n            scoreNode.getComponent(cc.Label).string = score;\n            scoreNode.color = (score > 0) ? addColor : reduceColor\n        }\n    },\n\n    showSingleReport(){\n        this.show();\n        this.singleRoundN.active = true;\n        require(\"Audio\").playEffect(\"mahjong\", \"result.mp3\")\n    },\n\n    show(){\n        this.endRoundN.active    = true;\n        this.animation.play(this.clips[0].name);\n    },\n\n    close(){\n        this.animation.play(this.clips[1].name).once('finished', function () {\n            this.endRoundN.active    = false;\n            this.singleRoundN.active = false;\n            this.totalRoundN.active  = false;\n        }, this);\n    },\n\n\n    hideSingleReport(){\n        this.singleRoundN.active = false;\n        this.singleRoundN.cleanData();\n    },\n\n    showTotalReport : function(){\n        this.show();\n        this.hideSingleReport();\n        this.totalRoundN.active = true;\n        this.checkEndMusic();\n    },\n\n    checkEndMusic(){\n        if(!this.totalRoundN.active || !this.resultVoice){return}\n        require(\"Audio\").playEffect('mahjong', this.resultVoice);\n        require(\"Audio\").stopMusic();\n    },\n\n    \n\n    //cur round report data\n    setSingleReportData : function(reportData, gameUI){\n        this.gameUI = gameUI;\n        this.singleRoundN.refreshData(reportData);\n        this.initBtnContiune();\n    },\n\n    setTotalReportData : function(reportData, gameUI){\n        this.gameUI          = gameUI;\n        this.totalReportData = reportData; \n        this.totalRoundN.refreshData(this.totalReportData);\n    },\n\n    onBtnClose : function(){\n        this.endRoundN.active    = false;\n        this.singleRoundN.active = false;\n        this.totalRoundN.active  = false;\n        this.resultVoice         = undefined;\n    },\n\n    onBtnExitClicked : function () {\n        require(\"Audio\").playEffect(\"hall\", \"button_nomal.mp3\");\n        gameManager.cleanPlayerPaiData();\n        gameManager.exiteRoom();\n    },\n\n    //share single report to other\n    onBtnSingleShare : function () {\n        require(\"Audio\").playEffect(\"hall\", \"button_nomal.mp3\");\n        require(\"JSPhoneWeChat\").WxShareFriendScreen();\n    },\n\n    //share total report to other\n    onBtnTotalShare : function () {\n        require(\"Audio\").playEffect(\"hall\", \"button_nomal.mp3\");\n        require(\"JSPhoneWeChat\").WxShareFriendScreen();\n\n    },\n\n    onBtnContiuneClicked : function(){\n        var gameReplayMgr   = require(\"mjReplayMgr\");\n        if(gameReplayMgr.isReplayPai()){\n            this.onBtnExitClicked();\n            return\n        }\n        require(\"Audio\").playEffect(\"hall\", \"button_nomal.mp3\");\n        this.hideSingleReport();\n        if(this.isCanContinue()){\n            this.gotoReadyUI();\n        }else {\n            this.showTotalReport();\n        }\n    },\n\n    gotoReadyUI : function(){\n        gameManager.cleanPlayerPaiData();\n        this.gameUI.lunpanN.active = false;\n        this.gameUI.hideRoomOptBtn();\n        this.gameUI.startReady();\n        this.close()\n    },\n\n    //是否还能继续打牌\n    isCanContinue : function(){\n        return (this.totalReportData === undefined);\n    },\n});\n"]}