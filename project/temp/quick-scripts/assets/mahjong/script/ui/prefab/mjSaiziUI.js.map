{"version":3,"sources":["mjSaiziUI.js"],"names":["GameDefine","require","cc","Class","extends","Component","properties","sai1N","Node","sai2N","onLoad","log","DefineType","DESKPOS_TYPE","directionList","SHANG","XIA","ZUO","YOU","spAnim_1","getComponent","sp","Skeleton","self","completeFunc","event","onAnimFinish","setCompleteListener","endCB","call","gameUI","playAnim","saiNode","id","count","mjDataMgr","roomID","get","KEYS","ROOMID","saiNum","parseInt","arguments","saiName","spAnim","setAnimation","play","saiziData","DIRECTION_TYPE","DONG","PlayerIdx","playCount","XI","wahuaPlayAnim","wahuaPlay","point","p1","p2"],"mappings":"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","file":"mjSaiziUI.js","sourceRoot":"../../../../../../../assets/mahjong/script/ui/prefab","sourcesContent":["var GameDefine = require(\"mjGameDefine\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        sai1N : cc.Node,\n        sai2N : cc.Node,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        cc.log('--- saizi onlocad ---')\n        var DefineType                       = GameDefine.DESKPOS_TYPE;\n        this.directionList                   = {};\n        this.directionList[DefineType.SHANG] = \"Shang\"; \n        this.directionList[DefineType.XIA]   = \"Xia\"; \n        this.directionList[DefineType.ZUO]   = \"Zuo\"; \n        this.directionList[DefineType.YOU]   = \"You\"; \n        this.spAnim_1 = this.sai1N.getComponent(sp.Skeleton);\n        var self = this;\n        var completeFunc = function(event){\n            self.onAnimFinish(event)\n        }\n        this.spAnim_1.setCompleteListener(completeFunc);\n    },\n\n    onAnimFinish : function(){\n        this.endCB.call(this.gameUI);\n    },\n\n    playAnim : function(saiNode, id, count){\n        //这个算法保证每家算的都一样，并且看起来是随机的\n        var mjDataMgr = require(\"mjDataMgr\");\n        var roomID  = mjDataMgr.get(mjDataMgr.KEYS.ROOMID);\n        var saiNum  =((parseInt(id) * 7)*count + roomID*13) % 6 + 1; \n        cc.log(arguments, \"saiNum\", saiNum, roomID, \"end\");\n        var saiName = saiNum;\n        var spAnim  = saiNode.getComponent(sp.Skeleton);\n        spAnim.setAnimation(0, saiName, false);\n    }, \n\n    play : function(saiziData, endCB, gameUI){\n        this.endCB    = endCB;\n        this.gameUI   = gameUI;  \n        this.playAnim(this.sai1N,  saiziData[GameDefine.DIRECTION_TYPE.DONG].PlayerIdx, saiziData.playCount+13);\n        this.playAnim(this.sai2N,  saiziData[GameDefine.DIRECTION_TYPE.XI].PlayerIdx, saiziData.playCount+7);\n\n    },\n\n    wahuaPlayAnim(saiNode, count) {\n        let spAnim = saiNode.getComponent(sp.Skeleton);\n        spAnim.setAnimation(0, count, false);\n    },\n\n    wahuaPlay(point, endCB, gameUI) {\n        this.endCB = endCB;\n        this.gameUI = gameUI;\n        this.wahuaPlayAnim(this.sai1N, point.p1);\n        this.wahuaPlayAnim(this.sai2N, point.p2);\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n"]}