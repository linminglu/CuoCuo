{"version":3,"sources":["mjReportListUI.js"],"names":["cc","Class","extends","Component","properties","noDataN","Node","listContentN","listItemP","Prefab","onLoad","animation","node","getComponent","Animation","clips","getClips","start","onEnable","play","name","close","require","playEffect","once","destroy","show","reportList","active","length","forEach","itemData","index","itemNode","instantiate","updateItem","getChildByName","Label","string","addChild","setPosition","p","bind","item","data","mjDataMgr","i","playerNode","playerData","getInstance","getPlayerData","fun","utils","loadUrlRes","Icon","showName","score","xdhs","isZhuangJia","tagN","ishu","iszm","isby","isdp"],"mappings":"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","file":"mjReportListUI.js","sourceRoot":"../../../../../../assets/mahjong/script/ui","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        noDataN     : cc.Node,\n        listContentN: cc.Node,\n        listItemP   : cc.Prefab,\n    },\n    onLoad () {\n        this.animation = this.node.getComponent(cc.Animation);\n        this.clips = this.animation.getClips();\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n\n    onEnable () {\n        this.animation.play(this.clips[0].name);\n    },\n\n    close () {\n        require(\"Audio\").playEffect(\"hall\", \"button_close.mp3\");\n        this.animation.play(this.clips[1].name).once('finished', function () {\n            this.node.destroy();\n        }, this);\n    },\n\n    show(reportList){\n        this.noDataN.active = (reportList.length == 0);\n        this.listContentN.length = reportList.length * 132;\n        reportList.forEach(function(itemData, index){\n            let itemNode = cc.instantiate(this.listItemP);\n            this.updateItem(itemNode, itemData);\n            itemNode.getChildByName(\"jushu\").getComponent(cc.Label).string = (index + 1);\n            this.listContentN.addChild(itemNode);\n            itemNode.setPosition(cc.p(0, -170 - index * 132));\n        }.bind(this))\n    },\n\n\n    updateItem(item, data){\n        var mjDataMgr = require(\"mjDataMgr\");\n        for(let i =0; i<4; i++){\n            let playerNode = item.getChildByName(\"player_\"+i);\n            playerNode.active = data[i];\n            if(data[i]){\n                let playerData = mjDataMgr.getInstance().getPlayerData(i);\n                fun.utils.loadUrlRes(playerData.Icon, playerNode.getChildByName(\"icon\"));\n                playerNode.getChildByName(\"name\").getComponent(cc.Label).string   =playerData.showName;\n                var score = data[i].xdhs > 0 ? \"+\" +  data[i].xdhs :  data[i].xdhs;\n                playerNode.getChildByName(\"fenshu\").getComponent(cc.Label).string = score;\n                playerNode.getChildByName(\"add\").getComponent(cc.Label).string    = score;\n                playerNode.getChildByName(\"zhuang\").active                        = data[i].isZhuangJia;\n                playerNode.getChildByName(\"add\").active                           = data[i].xdhs > 0;\n                playerNode.getChildByName(\"fenshu\").active                        = !(data[i].xdhs > 0);\n                var tagN = playerNode.getChildByName(\"tag\");\n                // if(tagN){\n                    tagN.getChildByName(\"hu\").active = data[i].ishu;\n                    tagN.getChildByName(\"lz\").active = false;  //data[i].islz; 周睿说不显示\n                    tagN.getChildByName(\"zm\").active = data[i].iszm;\n                    tagN.getChildByName(\"by\").active = data[i].isby;\n                    tagN.getChildByName(\"dp\").active = (!data[i].isby && data[i].isdp)\n                // }\n            }\n        }\n    },\n});\n"]}