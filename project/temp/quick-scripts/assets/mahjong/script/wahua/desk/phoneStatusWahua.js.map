{"version":3,"sources":["phoneStatusWahua.js"],"names":["cc","Class","extends","Component","properties","wifiNode","type","Node","default","signalNode","isChargerNode","batteryProgress","ProgressBar","timeLabel","Label","onLoad","fun","event","add","onPhoneNetEvent","bind","onPhoneBatteryEvent","require","getNetBatteryStatus","_sumdt","_currTime","Date","now","formatTime","onDestroy","remove","update","dt","data","status","active","setWifiStrength","strength","setSingalStrength","signal","progress","level","num","sys","os","OS_IOS","name","children","forEach","value","d","h","getHours","m","getMinutes","string"],"mappings":"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","file":"phoneStatusWahua.js","sourceRoot":"../../../../../../../assets/mahjong/script/wahua/desk","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        wifiNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        signalNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        isChargerNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        batteryProgress: {\n            type: cc.ProgressBar,\n            default: null,\n        },\n\n        timeLabel: {\n            type: cc.Label,\n            default: null,\n        },\n    },\n\n    onLoad () {\n        fun.event.add('PhoneNetPhoneStatusWahua', 'PhoneNet', this.onPhoneNetEvent.bind(this));\n        fun.event.add('PhoneBatteryPhoneStatusWahua', 'PhoneBattery', this.onPhoneBatteryEvent.bind(this));\n        require(\"JSPhoneNetBattery\").getNetBatteryStatus();\n        this._sumdt = 0;\n        this._currTime = Date.now();\n        this.formatTime();\n    },\n\n    onDestroy () {\n        fun.event.remove('PhoneNetPhoneStatusWahua');\n        fun.event.remove('PhoneBatteryPhoneStatusWahua');\n    },\n\n    update (dt) {\n        this._sumdt += dt;\n        if (this._sumdt < 1) {\n            return;\n        }\n        this._sumdt -= 1;\n        this._currTime += 1000;\n        this.formatTime();\n    },\n\n    onPhoneNetEvent(data) {\n        if (data.status === 5) {\n            this.wifiNode.active = true;\n            this.signalNode.active = false;;\n            this.setWifiStrength(data.strength);\n        } else {\n            this.wifiNode.active = false;\n            this.signalNode.active = true;\n            this.setSingalStrength(data.signal);\n        }\n    },\n\n    onPhoneBatteryEvent(data) {\n        this.isChargerNode.active = (data.status && (data.status > 0));\n        this.batteryProgress.progress = data.level;\n    },\n\n    setWifiStrength(num = 0) {\n        if (cc.sys.os === cc.sys.OS_IOS) {\n            num += 1;\n        }\n        const name = 'wifi_' + num;\n        this.wifiNode.children.forEach(function(value) {\n            if (value.name === name) {\n                value.active = true;\n            } else {\n                value.active = false;\n            }\n        });\n    },\n\n    setSingalStrength(num = 0) {\n        const name = 'xinhao_' + num;\n        this.signalNode.children.forEach(function(value) {\n            if (value.name === name) {\n                value.active = true;\n            } else {\n                value.active = false;\n            }\n        });\n    },\n\n    formatTime() {\n        let d = new Date(this._currTime);\n        let h = d.getHours();\n        if (h < 10) {\n            h = \"0\" + h;\n        }\n        let m = d.getMinutes();\n        if (m < 10) {\n            m = \"0\" + m;\n        }\n        this.timeLabel.string = h + \":\" + m;\n    },\n});\n"]}