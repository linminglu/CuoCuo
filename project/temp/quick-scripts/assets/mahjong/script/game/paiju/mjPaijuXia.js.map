{"version":3,"sources":["mjPaijuXia.js"],"names":["mjDataMgr","require","log","cc","xiaControl","init","paiListNode","paiScale","get","KEYS","CFG","pengGangHeng","pengGangZhi","shouWidth","EndWidth","EndHeight","gangDiff","outPaiDis","paiBackHitzoneN","getChildByName","on","showPaiBack","is3DView","sys","localStorage","getItem","fun","event","add","onViewChange","bind","refrePaiNode","_OnDestroy","remove","isPlaying","refreDachuPai","buhuaPaiN","scaleX","scaleY","initRound","superInitRound","OutPaiNode","undefined","shouPaiN","x","pengStartPos","pengGangPaiN","superPutPaiNode","putPaiNode","paiNode","rmTouchEvent","getShouPaiInfo","pai","shouLen","isMo","index","PaiType","PAISHOWTYPE","info","zOrder","pos","p","y","curScale","showType","PENG","getPengGangInfo","pengGangLen","paiZoneList","len","setShouRelativePos","totalLen","width","getDachuInfo","horizontal","honIndex","verIndex","Math","floor","startScale","zoomScale","mj3Ddis","bgFrameName","sfScale","contentPos","pow","skewX","getBuhuaInfo","addTouchEvent","onPaiNodeClicked","onPaiNodeMove","onPaiNodeStart","off","self","instance","playerUI","player","isTrunToMe","paiMovePos","getDelta","dragPai","moveDistance","abs","pDistance","dragDefaultPos","setShowType","SHOU","getPaiNode","getComponent","refresh","showChoosePai","addChild","setLocalZOrder","updateDragPos","getPosition","setPosition","onDragEnd","showPaiOut","name","lastTime","nowTime","Date","getTime","turnToDaPai","active","getNewMoveAction","newPos","curPos","moveX","action1","moveBy","action2","getDisTime","action3","sequence","module","exports"],"mappings":"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","file":"mjPaijuXia.js","sourceRoot":"../../../../../../../assets/mahjong/script/game/paiju","sourcesContent":["\nvar mjDataMgr = require(\"mjDataMgr\");\nvar log       = cc.log;\n/////////////////////////////// 下方玩家 //////////////////////////////////////////////////////////\nvar xiaControl = function(){\n\n    //---------------------new ----------------------------//\n    this.init = function(paiListNode){\n\n        this.paiScale        =mjDataMgr.get(mjDataMgr.KEYS.CFG).paiScale || 1;\n        this.pengGangHeng    = 60 * this.paiScale;\n        this.pengGangZhi     = 80 * this.paiScale;\n        this.shouWidth       = 84 * this.paiScale;\n        this.EndWidth        = 40;\n        this.EndHeight       = -53;\n        this.gangDiff        = 20;\n        this.outPaiDis       = 10 * this.paiScale;\n        this.paiBackHitzoneN = paiListNode.getChildByName(\"paiBackHitzone\");\n        this.paiBackHitzoneN.on(\"touchend\", this.showPaiBack, this)\n        this.is3DView        = cc.sys.localStorage.getItem(\"mjEyeView\") == \"3D\";\n        fun.event.add(\"mjViewChangeXia\", \"mjViewChange\", this.onViewChange.bind(this));\n        this.refrePaiNode();\n    }\n\n    this._OnDestroy = function(){\n        fun.event.remove(\"mjViewChangeXia\");\n    }\n\n    this.onViewChange = function(){\n        this.is3DView = cc.sys.localStorage.getItem(\"mjEyeView\") ==\"3D\";\n        if(!require(\"mjGameManager\").isPlaying){return}\n        // this.removeNodeChild(this.dachuPaiN);\n        this.refreDachuPai();\n        this.refrePaiNode();\n        // this.removeNodeChild(this.buhuaPaiN);\n        // this.refreBuhua();\n    }\n\n    this.refrePaiNode = function(){\n        this.buhuaPaiN.scaleX = this.is3DView ? 0.72 : 0.8\n        this.buhuaPaiN.scaleY = this.is3DView ? 0.72 : 0.8\n    }\n\n\n\n    this.initRound = function(){\n        this.superInitRound();\n        this.OutPaiNode     = undefined;\n        this.shouPaiN.x     = this.pengStartPos.x;\n        this.pengGangPaiN.x = this.pengStartPos.x;\n\n    }\n\n    this.superPutPaiNode = this.putPaiNode;\n    this.putPaiNode = function(paiNode){\n        this.rmTouchEvent(paiNode);\n        this.superPutPaiNode(paiNode);\n    }\n    this.getShouPaiInfo =  function(pai, shouLen, isMo, index, paiNode){\n        var PaiType   = require(\"mjGameDefine\").PAISHOWTYPE; \n        var info     = {}\n        info.zOrder  = index;\n        shouLen      = isMo  ?  shouLen + this.shouWidth / 2 : shouLen\n        info.pos     = cc.p(shouLen, paiNode.y);\n        info.shouLen = shouLen + this.shouWidth\n        info.curScale= this.paiScale;\n        if(pai.showType == PaiType.PENG){\n            info.curScale = info.curScale * 1.4;\n        }\n        return info;\n    }\n\n\n    this.getPengGangInfo = function(pai, pengGangLen, index){        \n        var info      = {}\n        info.zOrder   = index;\n        // if(!this.is3DView){\n           \n            if(index == 3){\n                info.zOrder = 100;\n                info.pos    = cc.p(pengGangLen - this.paiZoneList[pai.showType]-this.pengGangHeng , 18);\n                info.len    =pengGangLen;\n            }else {\n                info.pos = cc.p(pengGangLen, 0);\n                info.len =pengGangLen +  this.paiZoneList[pai.showType]\n            }\n        // }else{\n\n        // }\n        return info;\n    }\n\n\n\n    this.setShouRelativePos = function(pengGangLen, shouLen){\n        var totalLen        = this.paiListNode.width * this.paiScale;\n        this.pengGangPaiN.x = (totalLen - shouLen* this.paiScale - pengGangLen* this.paiScale ) /2\n        this.shouPaiN.x     = this.pengGangPaiN.x + pengGangLen;\n    }\n\n    //----------------打 的 牌-----------------\n    \n    // this.setDachuPaiPos = function(paiNode, index){\n\n    // }\n\n    this.getDachuInfo = function(index){\n        var horizontal = 11;\n        var honIndex   = index % horizontal ;\n        var verIndex   = Math.floor(index / horizontal)\n        var info       = {}\n        var startScale = 0.73;\n        var zoomScale  = 1.03;\n        info.is3DView = this.is3DView;\n        var mj3Ddis = [0,56, 112, 166.5,223,277.5,332,384.5,438.5,490.5,544.5,598]\n        if(!this.is3DView){\n            info.pos = cc.p(honIndex * this.EndWidth, verIndex * this.EndHeight)\n            info.bgFrameName =\"pz_tang\";\n            info.zOrder = index;\n            info.curScale = 1;\n            info.sfScale = 0.84;\n            info.contentPos = cc.p(25, 9); \n        }else{\n            //27.5  25 29.5\n            info.bgFrameName = \"x_d_\" + honIndex;\n            let curScale = startScale * Math.pow(zoomScale, verIndex) ;\n            let len =  -7 * verIndex + mj3Ddis[honIndex] * curScale - 15;\n            info.pos = cc.p(len, Math.pow(1.016, verIndex) * -43 * verIndex);\n            info.curScale = curScale* 1.2;\n            info.zOrder = verIndex * 20 + honIndex * ((honIndex > 5) ? -1 : 1);\n            info.sfScale = 0.84;\n            if(honIndex > 5){\n                info.skewX   = 5 - honIndex;\n                info.contentPos = cc.p(20.5 + honIndex*0.9, 12);\n            }else {\n                info.skewX   =7.5 - honIndex * 1.5;\n               info.contentPos = cc.p(27.5 - honIndex * 0.5, 12); \n            }\n            \n        }\n        return info;\n    }\n\n    //---------------------------------\n\n    this.getBuhuaInfo = function(paiNode, index){\n        var info = {};\n        info.zOrder = index;\n        // info.is3DView = this.is3DView;\n        var startScale = 0.73;\n        var zoomScale  = 1.03;\n        var mj3Ddis = [0,56, 112, 166.5,223,277.5,332,384.5,438.5,490.5,544.5,598]\n        if(true){\n            info.pos = cc.p(index * 40, 0);\n            info.bgFrameName =\"pz_tang\";\n            info.sfScale = 0.84;\n            info.curScale = 1;\n            info.contentPos = cc.p(25, 9);\n        }else {\n            var horizontal   = 22;\n            var honIndex     = index % horizontal ;\n            honIndex         =  honIndex > 10 ? 10 : honIndex;\n            var verIndex     =  3\n            info.bgFrameName = \"x_d_5\";\n            let curScale = startScale * Math.pow(zoomScale, verIndex);\n            let len =  -7 * verIndex + mj3Ddis[honIndex] * curScale + 200;\n            info.pos = cc.p(len, Math.pow(1.016, verIndex) * -43 * verIndex + 140);\n            info.curScale = curScale * 1.2;\n            info.zOrder = verIndex * 20 + honIndex * ((honIndex > 5) ? -1 : 1);\n            // info.skewX   = (7.5 - honIndex * 1.5)*curScale;\n            info.sfScale = 0.96;\n        }\n        return info;\n    }\n\n    this.addTouchEvent = function(paiNode){\n        paiNode.on(\"touchend\", this.onPaiNodeClicked, paiNode)\n        paiNode.on(\"touchcancel\", this.onPaiNodeClicked, paiNode)\n        paiNode.on(\"touchmove\", this.onPaiNodeMove, paiNode)\n        paiNode.on(\"touchstart\", this.onPaiNodeStart, paiNode)\n    }\n\n    this.rmTouchEvent = function(paiNode){\n        paiNode.off(\"touchend\", this.onPaiNodeClicked, paiNode)\n        paiNode.off(\"touchcancel\", this.onPaiNodeClicked, paiNode)\n        paiNode.off(\"touchmove\", this.onPaiNodeMove, paiNode)\n        paiNode.off(\"touchstart\", this.onPaiNodeStart, paiNode)\n    }\n\n\n    this.onPaiNodeMove = function(event){\n        var self    = this.instance;\n        var paiNode = this;\n        if(!self.playerUI.player.isTrunToMe()){return}\n        self.paiMovePos.x += event.getDelta().x;\n        self.paiMovePos.y += event.getDelta().y;\n        if(!self.dragPai){\n            var moveDistance = Math.abs( cc.pDistance(self.dragDefaultPos, self.paiMovePos))\n            if(moveDistance > 10){\n                var pai = paiNode.pai;\n                pai.setShowType(require(\"mjGameDefine\").PAISHOWTYPE.SHOU)\n                self.dragPai = self.getPaiNode(pai); \n                self.dragPai.getComponent(\"mjPaiUI\").refresh(pai);\n                self.playerUI.player.showChoosePai(paiNode.pai);\n                self.shouPaiN.addChild(self.dragPai);\n                self.dragPai.setLocalZOrder(999);\n                self.updateDragPos()\n            }\n        }else {\n            self.updateDragPos()\n        }\n    }\n\n    this.onPaiNodeStart = function(){\n        log(\"-this.onPaiNodeStart---\")\n        var self    = this.instance;\n        var paiNode = this;\n        self.paiMovePos     = paiNode.getPosition();\n        self.dragDefaultPos = paiNode.getPosition();\n    }\n\n    this.updateDragPos = function(){\n        log(\"-this.onPaiNodeStart---\")\n        this.dragPai.setPosition(this.paiMovePos);\n    }\n\n    this.onPaiNodeClicked = function() {\n        var self    = this.instance;\n        var paiNode = this;\n        if(self.dragPai){\n            self.onDragEnd(paiNode);\n        }else {\n            if(!self.OutPaiNode){\n                self.showPaiOut(paiNode)\n            }else if(paiNode.name == self.OutPaiNode.name){\n                self.lastTime = self.lastTime || 0;\n                var nowTime   = (new Date()).getTime();\n                if((nowTime - self.lastTime) > 1000){\n                     self.playerUI.player.turnToDaPai(paiNode.pai)\n                     self.lastTime = nowTime;\n                }\n                self.showPaiBack();\n            }else {\n                self.showPaiBack();\n                self.showPaiOut(paiNode);\n            }\n        }\n    }\n\n    this.showPaiOut = function(paiNode){\n        this.OutPaiNode = paiNode;\n        paiNode.y += this.outPaiDis;\n        this.playerUI.player.showChoosePai(paiNode.pai);\n        this.paiBackHitzoneN.active = true;\n    } \n\n    this.showPaiBack = function(){\n        this.paiBackHitzoneN.active = false;\n        if(this.OutPaiNode){\n            this.OutPaiNode.y -= this.outPaiDis;\n        }\n        delete this.OutPaiNode;\n        this.playerUI.player.showChoosePai(-999);\n        \n    }\n\n    //paiFunc------------\n    this.onDragEnd =  function(paiNode){\n        var moveDistance = this.paiMovePos.y  - this.dragDefaultPos.y;\n        this.putPaiNode(this.dragPai);\n        this.dragPai = undefined;\n        this.playerUI.player.showChoosePai(-999);\n        if(moveDistance> 100){\n            this.playerUI.player.turnToDaPai(paiNode.pai)\n        }\n    }\n\n\n\n\n\n\n\n    \n    //获取新牌移动的动画\n    this.getNewMoveAction = function(newPos, curPos){\n        //距离\n        var moveX   = newPos.x - curPos.x;\n        var action1 = cc.moveBy(0.1, cc.p(0, 70));\n        var action2 = cc.moveBy(this.getDisTime(newPos, curPos), cc.p(moveX, 0));\n        var action3 = cc.moveBy(0.1, cc.p(0, -70));\n        return cc.sequence(action1, action2, action3);\n    }\n\n\n\n\n\n\n\n    \n\n}\n\nmodule.exports = {\n    instance : xiaControl,\n}\n"]}