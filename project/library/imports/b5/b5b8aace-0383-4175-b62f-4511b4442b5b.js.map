{"version":3,"sources":["../../../../../../assets/poker/script/pukeComm/assets/poker/script/pukeComm/NiuNiuManager.js"],"names":["NiuNiuManager","PukeData","require","funUtils","PukeUtils","PukeDefine","Audio","initGame","gameUICB","UserInfo","fun","db","getData","MineUserId","UserId","MineSeat","getSeatByNumber","data","MineIsMaster","getRoomMasterByRoomInfo","_isShowCard","_isMineNewUser","EnterRoom","userMap","newUser","_checkSpineCacheComplete","i","initRoomInfo","initSeatInfo","initQZhuangFunction","initListener","update","dt","StartChooseZhuang","qzDtTime","chaTime","QIANG_ZHUANG_WAIT_TIME","DingZhuangTime","setBtnQZhuangActive","showHint","seatNum","QiangZhuangSeat","length","qzPersonNum","ZeroZhuangSeat","TurnZhuangTime","QIANG_ZHUANG_TURN_TIME","tzDtSingle","tzDtMore","TurnZhuangCount","TurnZhuang","setZhuangFalse","seat","Zhuang","active","undefined","getSpineCacheComplete","_spineCacheFunc","onDestroy","cleanListener","RoomId","setData","SeatArray","faPaiPukes","faPaiSeats","_userMap","copyDisbandPrefab","copyTotalAccount","updateSeatNumber","player","minePlayer","id","value","checkIsMineUserId","userId","sort","Array","cha","Math","abs","getSeatNumberByRoomIdx","roomIdx","parseInt","num","getSeatByUserId","getNewPaiIdById","addNum","idx","newPaiId","getPukeSpriteById","cleanSeatData","Readying","j","ShuZi","YaBox","Ying","Shu","pushGold","seatNumber","goldNum","getGoldsNode","min","max","divisor","PUSH_GOLD_NUMBER","copyGold","getFromGoldPool","getChildByName","addChild","startPos","POSITION","GOLD","START_POS","setScale","setPosition","cc","p","x","y","time","random","endPos","END_POS","randPx","randPy","distance","pGetDistance","intCen","floor","setLocalZOrder","moveto","moveTo","easing","easeSineInOut","stopAllActions","runAction","playEffect","callInGold","msg","account","gameOver","self","overTime","min2","max2","zhuangStartPos","roomRule","makersType","zhuangSeatNumber","CurrentZhuang","RoomIdx","goldSeat","childrenCount","gold","children","sequence","callFunc","putInGoldPool","scheduleOnceFunc","score","winSeat","goldWinSeat","SeatNumber","goldStartPos","maxTime","k","m","onAccountFunc","isZhuangShu","faPaiAnimation","index","setState","setBtnCuoPaiActive","SEND_CARD_COMPLETE_TIME","SEND_CARD_SINGLE_TIME","copyPuke","getPukePool","get","getChildNode","px","py","put","count","seatPuke","type","posx","PUKE","NIU_NIU","setPositionX","puke","myCards","getComponent","Sprite","spriteFrame","cuoPaiAnimation","showType","isCuoPaiComplete","copyCuoPai","getCuoPaiPool","pukeCuo","from","GameType","CuoPaiNumber","cb","net","send","bind","initPuke","IsFreeQiangZhuang","resetUserInfo","info","newInfo","HeadUrl","imageUrl","Name","userName","Score","totalScore","Ip","ip","Sex","sex","Zhu","yaFeng","Ready","currentState","GamePhase","Address","content","State","console","log","state","color","setGameStatus","gamePhase","RoundJuShu","currentNum","TotalJuShu","roomNum","DiFen","ROOM_INFO","DI_FEN","bottomScore","ZhuangWei","NIUNIU_ROOM_INFO","MASKERS_TYPE","Charge","COST","reduceCard","IsMaster","ISMASTER","Round","Total","TypeScore","typeScore","KanDou","kanDou","ShunDou","shunDou","WuHua","wuHua","WuXiao","wuXiao","ZhaDan","zhaDan","setCreateSeat","RecentYaZhu","onLine","Mask","isMine","setEnterSeat","niuThree","niuTwo","sn","showTypeFunc","alreadyChess","pukeid","zhuang","ZhuangSp","setAnimation","startGameReady","setBtnInviteActive","ListenCBList","pListenCBList","listen","cmd","isPingTai","pListen","push","onEnterRoomAck","onOffLineAck","onReadyNextAck","onQZhuangAck","onSomeOneYaZhuAck","onStartGameAck","onShowCardAck","onSingalAccountAck","onTotalAccountAck","onLeaveRoomAck","onDisbandRoomAck","onDisbandRoomVoteAck","onDisbandRoomResultAck","rmListen","rmPListen","userOneMap","onOnLineAck","hint","setBtnReadyActive","ready","HINT_TEXT","WAIT_QIANG_ZHUANG","RobMakersPeopl","robMakers","Op","Zhuangjia","onZhuangAck","roomJuShuAdd","setJuShuText","zhuangFunc","setBtnXuYaActive","WAIT_XIA_ZHU","zhuangSeat","resetFunc","setBtnXiaZhuActive","showXiaZhu","canBetScore","getIsXuYa","onBtnXiaZhuClicked","ZI_DONG_XU_YA_TIME","xianScore","XianTuiZhuScore","setBtnTuiZhuActive","YaZhu","string","betScore","_showType","niuType","sortCardsMap","currentPlayer","Cards","pukes","seats","pos","getPosition","fuhao","getContentSize","width","SEND_CARD_DELAY","anim","TYPE_SCORE_EN","ShuZiSp","PAI_JU_SCORE","isClean","YingLabel","ShuLabel","Fen","WAIT_READY","ACCOUNT_CURRENT_JUSHU","JuShu","highestScore","newData","name","_Name","head","left","lost","Deduc","a","b","sortAccounts","WAIT_TOTAL_ACCOUNT","TOTAL_ACCOUNT_SHOW_TIME","destroy","setCountDownTime","initTotalAccount","director","loadScene","pukeNumber","GAME_TYPE","PUKE_NUMBER","resetSeat","breakStatu","setMenuBgActive","applyBreakStatu","DISBAND_ROOM_DELAY_TIME","inDisbandRoomFunc","event","dispatch","contentStr","getDisband","applyStatu","headUrl","disbandRoomInit","YaZhuFunction","yanum","yaFen","TuiZhuFunction","rsp","returnStatu","LeaveRoomFunction","getGameStatus","jushu","getJuShuText","substring","ReadyFunction","QZhuangFunction","qz","wxShare","difen","title","WxShareFriend","module","exports"],"mappings":"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","file":"NiuNiuManager.js","sourceRoot":"../../../../../../assets/poker/script/pukeComm","sourcesContent":["let NiuNiuManager = {};\nlet PukeData = require('PukeData');\nlet funUtils = require('funUtils');\nlet PukeUtils = require('PukeUtils');\nlet PukeDefine = require('PukeDefine');\nlet Audio = require('Audio');\n\nNiuNiuManager.initGame = function(gameUICB){\n    this.gameUICB = gameUICB;\n    \n    this.UserInfo = fun.db.getData('UserInfo', true);\n    this.MineUserId = this.UserInfo.UserId;\n    this.MineSeat = this.getSeatByNumber(1);\n    this.data = fun.db.getData('RoomInfo');\n    this.MineIsMaster = this.getRoomMasterByRoomInfo();\n    this._isShowCard = true;\n    this._isMineNewUser = this.data.EnterRoom === 'create'?true:this.data.userMap[this.MineUserId].newUser;\n    this._checkSpineCacheComplete = {};\n    for(let i=1; i<=6; ++i) {\n        this._checkSpineCacheComplete[i] = false;\n    }\n    this.initRoomInfo();\n    this.initSeatInfo();\n    this.initQZhuangFunction();\n    this.initListener();\n}\nNiuNiuManager.update = function (dt) {\n    if(this.StartChooseZhuang){\n        this.qzDtTime = (this.qzDtTime || 0) + dt;\n        let chaTime = PukeDefine.QIANG_ZHUANG_WAIT_TIME - this.DingZhuangTime;\n        if(this.qzDtTime >= chaTime){\n            this.gameUICB.setBtnQZhuangActive(false);\n            if (!this._isMineNewUser) {\n                this.gameUICB.showHint(false);\n            }\n            this.seatNum = this.QiangZhuangSeat.length;\n            let qzPersonNum = this.seatNum === 0 ? this.ZeroZhuangSeat.length : this.seatNum;\n            this.TurnZhuangTime = PukeDefine.QIANG_ZHUANG_TURN_TIME/(5*qzPersonNum);\n            this.tzDtSingle = 0;\n            this.tzDtMore = 0;\n            this.TurnZhuangCount = 0;\n            this.TurnZhuang = true;\n            this.StartChooseZhuang = false;\n            this.qzDtTime = 0;\n        }\n    }\n    if(this.TurnZhuang){\n        if(this.seatNum === 0){\n            this.tzDtSingle += dt;\n            if(this.tzDtSingle >= this.TurnZhuangTime){\n                this.tzDtSingle -= this.TurnZhuangTime;\n                this.TurnZhuangCount = this.TurnZhuangCount === this.ZeroZhuangSeat.length ? 1 : (this.TurnZhuangCount + 1);\n                this.setZhuangFalse();\n                let seat = this.getSeatByNumber(this.ZeroZhuangSeat[this.TurnZhuangCount-1]);\n                seat.Zhuang.active = true;\n            }\n        } else if (this.seatNum >= 2) {\n            this.tzDtMore += dt;\n            if(this.tzDtMore >= this.TurnZhuangTime){\n                this.tzDtMore -= this.TurnZhuangTime;\n                this.TurnZhuangCount = this.TurnZhuangCount === this.seatNum ? 1 : (this.TurnZhuangCount + 1);\n                this.setZhuangFalse();\n                let seat = this.getSeatByNumber(this.QiangZhuangSeat[this.TurnZhuangCount - 1]);\n                seat.Zhuang.active = true;\n            }\n        }\n    }\n    for (let i=1; i<=6; ++i) {\n        if(this._checkSpineCacheComplete !== undefined\n            && this._checkSpineCacheComplete[i] !== undefined\n            && this._checkSpineCacheComplete[i]){\n            if(this.gameUICB.getSpineCacheComplete().length === 6) {\n                this._checkSpineCacheComplete[i] = false;\n                this._spineCacheFunc(i);\n            }\n        }\n    }\n    \n}\nNiuNiuManager.onDestroy  = function(){\n    this.cleanListener();\n    this.UserInfo.RoomId = 0;\n    fun.db.setData('UserInfo', this.UserInfo);\n    this.SeatArray = [];\n    this.UserInfo = {};\n    this.data = {};\n    this.faPaiPukes = [];\n    this.faPaiSeats = [];\n    this.QiangZhuangSeat = [];\n    this.ZeroZhuangSeat = [];\n    this._userMap = {};\n    this.copyDisbandPrefab = undefined;\n    this.copyTotalAccount = undefined;\n    this.StartChooseZhuang = false;\n    this.TurnZhuang = false;\n}\n\n//-----------------------------------------------------------\n//----- 座位号 调整\nNiuNiuManager.updateSeatNumber = function (player) {\n    let minePlayer = {};\n    if (this.data.EnterRoom === 'enter') {\n        for (let id in player) {\n            let value = player[id];\n            if (this.checkIsMineUserId(value.userId)) {\n                minePlayer = value;\n            }\n        }\n    } else if (this.data.EnterRoom === 'create') {\n        minePlayer = {sort: 0};\n    }\n    this.SeatArray = new Array();\n    for (let i=0; i<6; i++) {\n        if (i === 0) {\n            this.SeatArray[0] = minePlayer.sort;\n        } else {\n            this.SeatArray[i] = '';\n        }\n    }\n    if (this.data.EnterRoom === 'enter') {\n        for (let i in player) {\n            let value = player[i];\n            let cha = Math.abs(minePlayer.sort - value.sort);\n            if (minePlayer.sort > value.sort) {\n                this.SeatArray[6-cha] = value.sort;\n            } else if (minePlayer.sort < value.sort) {\n                this.SeatArray[cha] = value.sort;\n            }\n        }\n    }\n}\n//----- 根据 RoomIdx 返回座位号\nNiuNiuManager.getSeatNumberByRoomIdx = function (roomIdx) {\n    for (let i = 0; i < this.SeatArray.length; i++) {\n        if (this.SeatArray[i] === parseInt(roomIdx)) {\n            return i+1;\n        }\n    }\n    return roomIdx + 1;\n}\n//----- 根据 座位号 获取 Seat\nNiuNiuManager.getSeatByNumber = function (num) {\n    return this.gameUICB.getSeatByNumber(num);\n}\n//----- 根据 UserId 获取 Seat\nNiuNiuManager.getSeatByUserId = function (id) {\n    for (let i=1; i<=6; i++) {\n        let seat = this.getSeatByNumber(i);\n        if (parseInt(seat.UserId) === parseInt(id)) {\n            return seat;\n        }\n    }\n}\n//----- 根据 牌ID 转换对应的 新牌ID\nNiuNiuManager.getNewPaiIdById = function (id) {\n    let addNum;\n    if (id <= 13) {\n        addNum = 1;\n    } else if (id > 13 && id <= 26) {\n        addNum = 2;\n    } else if (id > 26 && id <= 39) {\n        addNum = 3;\n    } else if (id > 39 && id <= 52) {\n        addNum = 4;\n    } else {\n        addNum = id;\n    }\n    let idx = id % 13 === 0 ? (13 - 1) : (id % 13 - 1);\n    let newPaiId = addNum === 'pai' ? id : idx * 4 + addNum;\n    return newPaiId;\n}\n//----- 根据 牌ID 取牌\nNiuNiuManager.getPukeSpriteById = function (id) {\n    return this.gameUICB.getPukeSpriteById(this.getNewPaiIdById(id));\n}\n//----- 清空 座位 信息\nNiuNiuManager.cleanSeatData = function () {\n    for(let i=1; i<=6; i++){\n        let seat = this.getSeatByNumber(i);\n        seat.Readying.active = false;\n        for(let j=1; j<=5; j++){\n            seat['Puke'+j].active = false;\n        }\n        seat.ShuZi.active = false;\n        seat.YaBox.active = false;\n        seat.Ying.active  = false;\n        seat.Shu.active   = false;\n    }\n}\n//----- 金币押注动画\nNiuNiuManager.pushGold = function (seatNumber, goldNum) {\n    this.gameUICB.getGoldsNode().active = true;\n    let min = 2, max = 8, divisor = 12;\n    for (let j=0; j<PukeDefine.PUSH_GOLD_NUMBER; j++) {\n        let copyGold = this.gameUICB.getFromGoldPool();\n        this.gameUICB.getGoldsNode().getChildByName('seat'+seatNumber).addChild(copyGold);\n        let startPos = PukeDefine.POSITION.GOLD[seatNumber].START_POS;\n        copyGold.setScale(0.6);\n        copyGold.setPosition(cc.p(startPos.x, startPos.y));\n        let time     = funUtils.random(min, max)/divisor;\n        let endPos   = PukeDefine.POSITION.GOLD[seatNumber].END_POS;\n        let randPx   = endPos.x + funUtils.random(-30, 30);\n        let randPy   = endPos.y + funUtils.random(-30, 30);\n        let distance = PukeUtils.pGetDistance(startPos, cc.p(randPx, randPy));\n        let intCen   = Math.floor(distance/time);\n        copyGold.setLocalZOrder(1000 - intCen);\n        let moveto   = cc.moveTo(time, cc.p(randPx, randPy));\n        moveto.easing(cc.easeSineInOut());\n        copyGold.stopAllActions();\n        copyGold.runAction(moveto);\n    }\n    Audio.playEffect('pork', 'gold.wav');\n}\n//----- 金币回收动画\nNiuNiuManager.callInGold = function (msg) {\n    this.gameUICB.getGoldsNode().active = true;\n    let account = msg.gameOver;\n    let self = this;\n    let overTime = 0;\n    let min = 5, max = 10, min2 = 5, max2 = 10, divisor = 10;\n    let zhuangStartPos;\n    if (this.data.roomRule.makersType === 4) {\n        zhuangStartPos = { x : 0, y : 0 }\n    } else {\n        let zhuangSeatNumber = this.getSeatNumberByRoomIdx(this.CurrentZhuang);\n        zhuangStartPos = PukeDefine.POSITION.GOLD[zhuangSeatNumber].START_POS;\n    }\n    for (let i=1; i<=6; i++) {\n        let seat = this.getSeatByNumber(i);\n        if (seat.RoomIdx != this.CurrentZhuang) {\n            let goldSeat = this.gameUICB.getGoldsNode().getChildByName('seat'+i);\n            if (goldSeat.childrenCount > 0) {\n                for (let i=0; i<goldSeat.children.length; ++i) {\n                    let gold = goldSeat.children[i];\n                    let time = funUtils.random(min, max)/divisor;\n                    overTime = Math.max(time, overTime);\n                    let moveto = cc.moveTo(time, cc.p(zhuangStartPos.x, zhuangStartPos.y));\n                    moveto.easing(cc.easeSineInOut());\n                    gold.runAction(cc.sequence(moveto, cc.callFunc(function(){\n                        self.gameUICB.putInGoldPool(gold);\n                    })));\n                }\n            }\n        }\n    }\n    Audio.playEffect('pork', 'gold.wav');\n    if (this.data.roomRule.makersType === 4) { //通比牛牛\n        this.gameUICB.scheduleOnceFunc(function(){\n            for (let id in account) {\n                let value = account[id];\n                if (value.score > 0) {\n                    let winSeat = self.getSeatByUserId(id);\n                    let goldWinSeat = self.gameUICB.getGoldsNode().getChildByName('seat'+winSeat.SeatNumber);\n                    let goldStartPos = PukeDefine.POSITION.GOLD[winSeat.SeatNumber].START_POS;\n                    let maxTime = 0;\n                    for (let k = 0; k < PukeDefine.PUSH_GOLD_NUMBER; ++k) {\n                        let gold = self.gameUICB.getFromGoldPool();\n                        goldWinSeat.addChild(gold);\n                        gold.setPosition(cc.p(zhuangStartPos.x, zhuangStartPos.y));\n                        let time = funUtils.random(min2, max2)/divisor;\n                        maxTime = Math.max(time, maxTime);\n                        let moveto = cc.moveTo(time, cc.p(goldStartPos.x, goldStartPos.y));\n                        moveto.easing(cc.easeSineInOut());\n                        gold.stopAllActions();\n                        gold.runAction(cc.sequence(moveto, cc.callFunc(function(){\n                            for (let m = 0; m < goldWinSeat.children.length; ++m) {\n                                let gold = goldWinSeat.children[m];\n                                self.gameUICB.putInGoldPool(gold);\n                            }\n                        })));\n                    }\n                    self.gameUICB.scheduleOnceFunc(function(){\n                        for (let num in goldWinSeat.children) {\n                            self.gameUICB.putInGoldPool(goldWinSeat.children[num]);\n                        }\n                    }, maxTime*0.98)\n                }\n            }\n            Audio.playEffect('pork', 'gold.wav');\n            self.onAccountFunc(msg);\n        }, overTime);\n        return;\n    }\n    this.gameUICB.scheduleOnceFunc(function(){\n        let isZhuangShu = false;\n        for (let id in account) {\n            let value = account[id];\n            if (value.score > 0) {\n                let winSeat = self.getSeatByUserId(id);\n                if (winSeat.RoomIdx != self.CurrentZhuang) {\n                    isZhuangShu = true;\n                    let goldWinSeat = self.gameUICB.getGoldsNode().getChildByName('seat'+winSeat.SeatNumber);\n                    let goldStartPos = PukeDefine.POSITION.GOLD[winSeat.SeatNumber].START_POS;\n                    let maxTime = 0;\n                    for (let k = 0; k < PukeDefine.PUSH_GOLD_NUMBER; ++k) {\n                        let gold = self.gameUICB.getFromGoldPool();\n                        goldWinSeat.addChild(gold);\n                        gold.setPosition(cc.p(zhuangStartPos.x, zhuangStartPos.y));\n                        let time = funUtils.random(min2, max2)/divisor;\n                        maxTime = Math.max(time, maxTime);\n                        let moveto = cc.moveTo(time, cc.p(goldStartPos.x, goldStartPos.y));\n                        moveto.easing(cc.easeSineInOut());\n                        gold.stopAllActions();\n                        gold.runAction(cc.sequence(moveto, cc.callFunc(function(){\n                            for (let m = 0; m < goldWinSeat.children.length; ++m) {\n                                let gold = goldWinSeat.children[m];\n                                self.gameUICB.putInGoldPool(gold);\n                            }\n                        })));\n                    }\n                    self.gameUICB.scheduleOnceFunc(function(){\n                        self.gameUICB.getGoldsNode().active = false;\n                        for (let num in goldWinSeat.children) {\n                            self.gameUICB.putInGoldPool(goldWinSeat.children[num]);\n                        }\n                    }, maxTime*0.98)\n                }\n            }\n        }\n        if (isZhuangShu) {\n            Audio.playEffect('pork', 'gold.wav');\n        }\n        self.onAccountFunc(msg);\n    }, overTime);\n}\n//----- 发牌动画\nNiuNiuManager.faPaiAnimation = function (index) {\n    Audio.playEffect('pork', 'fapai.mp3');\n    let self = this;\n    if (index >= this.faPaiPukes.length) {\n        this.gameUICB.scheduleOnceFunc(function(){\n            if (!self._isMineNewUser) {\n                self.setState('搓牌中');\n                self.gameUICB.setBtnCuoPaiActive(true);\n            }\n        }, PukeDefine.SEND_CARD_COMPLETE_TIME)\n    } else {\n        let time = PukeDefine.SEND_CARD_SINGLE_TIME;\n        let copyPuke = this.gameUICB.getPukePool().get();\n        copyPuke.setPosition(0, 0);\n        this.gameUICB.getChildNode().getChildByName('puke').addChild(copyPuke);\n        let px = this.faPaiPukes[index].x, py = this.faPaiPukes[index].y;\n        let moveto = cc.moveTo(time, cc.p(px, py));\n        moveto.easing(cc.easeSineInOut());\n        copyPuke.runAction(cc.sequence(moveto, cc.callFunc(function(){\n            self.gameUICB.getPukePool().put(copyPuke);\n            let count = index%5 + 1;\n            let seat = self.faPaiSeats[Math.floor(index/5)]\n            let seatPuke = seat.getChildByName('puke'+count);\n            let type = seat.SeatNumber === 1 ? 'MINE' : 'OTHER';\n            let posx = PukeDefine.POSITION.PUKE.NIU_NIU[count][type].x\n            seatPuke.setPositionX(posx);\n            seatPuke.active = true;\n            if (seat.UserId === self.MineUserId && count != 5) {\n                let puke = self.faPaiSeats.myCards[count-1];\n                seatPuke.getComponent(cc.Sprite).spriteFrame = self.getPukeSpriteById(puke);\n            } else {\n                seatPuke.getComponent(cc.Sprite).spriteFrame = self.getPukeSpriteById('pai');\n            }\n            seatPuke.active = true;\n            index += 1;\n            self.faPaiAnimation(index);\n        })));\n    }\n}\n//----- 搓牌动画\nNiuNiuManager.cuoPaiAnimation = function (type, showType) {\n    this.gameUICB.setBtnCuoPaiActive(false);\n    this.isCuoPaiComplete = false;\n    if (this.copyCuoPai) {\n        this.gameUICB.getCuoPaiPool().put(this.copyCuoPai);\n    }\n    let seat = this.getSeatByNumber(1);\n    let pukeCuo = seat.getChildByName('puke5');\n    pukeCuo.active = false;\n    this.copyCuoPai = this.gameUICB.getCuoPaiPool().get();\n    this.copyCuoPai.setPosition(0, 0);\n    this.gameUICB.getChildNode().getChildByName('cuopai').addChild(this.copyCuoPai);\n    let data  = {};\n    data.from = type;\n    data.GameType = 'NIUNIU';\n    data.num  = this.getNewPaiIdById(this.CuoPaiNumber) + 3;\n    data.cb   = function(){\n        if (type != 'showCard') {\n            fun.net.send('NiuShowCards', {});\n        }\n        this.isCuoPaiComplete = true;\n        pukeCuo.active = true;\n        pukeCuo.getComponent(cc.Sprite).spriteFrame = this.getPukeSpriteById(this.CuoPaiNumber);\n        this.gameUICB.getCuoPaiPool().put(this.copyCuoPai);\n    }.bind(this);\n    this.copyCuoPai.getComponent('CuoPai').initPuke(data);\n}\n//----- 初始化抢庄\nNiuNiuManager.initQZhuangFunction = function () {\n    if (this.data != undefined && this.data.roomRule.makersType === 3) {\n        this.IsFreeQiangZhuang = true;\n        this.QiangZhuangSeat   = new Array();\n        this.ZeroZhuangSeat    = new Array();\n        this.TurnZhuang        = false;\n    }\n}\n//----- setEnterSeat 数据结构改变\nNiuNiuManager.resetUserInfo = function (info) {\n    let newInfo = {};\n    newInfo.HeadUrl = info.imageUrl;\n    newInfo.Name    = info.userName;\n    newInfo.UserId  = parseInt(info.userId);\n    newInfo.Score   = info.totalScore;\n    newInfo.RoomIdx = info.sort;\n    newInfo.Ip      = info.ip;\n    newInfo.Sex     = info.sex;\n    newInfo.Zhu     = info.yaFeng || 0;\n    newInfo.Ready   = (info.currentState === 0 || info.currentState === 3) ? false : true;\n    newInfo.GamePhase = info.GamePhase;\n    newInfo.newUser   = info.newUser;\n    newInfo.Address  = info.Address;\n    return newInfo;\n}\n//----- 检测是否为房主\nNiuNiuManager.getRoomMasterByRoomInfo = function () {\n    let idx = this.data.EnterRoom === 'create' ? 0 : this.data.userMap[this.MineUserId].sort;\n    return idx === 0 ? true : false;\n}\n//----- 庄显示为 false\nNiuNiuManager.setZhuangFalse = function () {\n    for (let i = 0; i < 6; ++i) {\n        let seat = this.getSeatByNumber(i+1);\n        seat.Zhuang.active = false;\n    }\n}\n//----- 检测是否为自己的UserId\nNiuNiuManager.checkIsMineUserId = function(id){\n    if (parseInt(id) === this.MineUserId)\n        return true;\n    else\n        return false;\n}\n//----- 设置游戏状态\nNiuNiuManager.setState = function(content){\n    for(let i=0; i<6; ++i){\n        let seat = this.getSeatByNumber(i+1);\n        if (seat.active) {\n            if (!content) {\n                // cc.log('--- setState false ---')\n                seat.State.active = false;\n                // this.gameUICB.jumpTextAnim(false);\n            }\n            else {\n                let seatNumber = this.getSeatNumberByRoomIdx(this.CurrentZhuang);\n                if (content === '下注中' && seatNumber === i+1)\n                    console.log('庄家不下注');\n                else\n                    this.gameUICB.setState({state: seat.State, content: content, color: 0});\n            }\n        }\n    }\n}\n\n//-----------------------------------------------------------\n//----- 初始化 房间 信息\nNiuNiuManager.initRoomInfo = function () {\n    let roomRule    = this.data.roomRule;\n    let userMap     = this.data.userMap;\n    this.gameUICB.setGameStatus(roomRule.gamePhase);\n    this.RoomId     = roomRule.RoomId;\n    this.RoundJuShu = roomRule.currentNum;\n    this.TotalJuShu = roomRule.roomNum;\n    this.DiFen      = PukeDefine.ROOM_INFO.DI_FEN[roomRule.bottomScore-1];\n    this.ZhuangWei  = PukeDefine.NIUNIU_ROOM_INFO.MASKERS_TYPE[roomRule.makersType-1];\n    this.Charge     = PukeDefine.ROOM_INFO.COST[roomRule.reduceCard-1];\n    this.IsMaster = PukeDefine.ROOM_INFO.ISMASTER[this.getRoomMasterByRoomInfo() ? 0 : 1];\n    let msg = {\n        RoomId    : this.RoomId,\n        Round     : this.RoundJuShu,\n        Total     : this.TotalJuShu,\n        ZhuangWei : this.ZhuangWei,\n        DiFen     : this.DiFen[0],\n        IsMaster  : this.IsMaster,\n        GamePhase : roomRule.gamePhase\n    }\n    this.gameUICB.initRoomInfo(msg);\n    this.TypeScore = roomRule.typeScore;\n    this.KanDou    = roomRule.kanDou || 0;\n    this.ShunDou   = roomRule.shunDou || 0;\n    this.WuHua     = roomRule.wuHua || 0;\n    this.WuXiao    = roomRule.wuXiao || 0;\n    this.ZhaDan    = roomRule.zhaDan || 0;\n}\n//----- 初始化 座位 信息\nNiuNiuManager.initSeatInfo = function () {\n    let roomRule = this.data.roomRule;\n    let userMap  = this.data.userMap;\n    this._userMap = {};\n    if (this.data.EnterRoom === 'create') {\n        this.updateSeatNumber();\n        this.gameUICB.setCreateSeat();\n        this.RecentYaZhu = 1;\n    } else if (this.data.EnterRoom === 'enter') {\n        this.updateSeatNumber(userMap);\n        for (let id in userMap) {\n            let value = userMap[id];\n            let seatNumber = this.getSeatNumberByRoomIdx(value.sort);\n            let seat = this.getSeatByNumber(seatNumber);\n            if (value.onLine != 1){  // onLine-2 不在线 onLine-1 在线\n                seat.Mask.active = true;\n            }\n            let isMine = this.checkIsMineUserId(id);\n            value.GamePhase = roomRule.gamePhase;\n            this.gameUICB.setEnterSeat(seatNumber, this.resetUserInfo(value));\n            if (value.niuThree && value.niuThree !== null && value.niuThree !== undefined) {\n                if (value.niuThree.length <= 0)  return;\n                for (let i = 1; i <= 3; ++i){\n                    let puke = this.getPukeSpriteById(value.niuThree[i-1]);\n                    seat['Puke'+i].getComponent(cc.Sprite).spriteFrame = puke;\n                    seat['Puke'+i].active = true;\n                }\n                for (let i = 4; i <= 5; ++i){\n                    let puke = this.getPukeSpriteById(value.niuTwo[i-4]);\n                    seat['Puke'+i].getComponent(cc.Sprite).spriteFrame = puke;\n                    seat['Puke'+i].active = true;\n                }\n                this._checkSpineCacheComplete[seat.SeatNumber] = true;\n                this._userMap[seat.SeatNumber] = {};\n                this._userMap[seat.SeatNumber].value = value;\n                this._userMap[seat.SeatNumber].seat = seat;\n                this._spineCacheFunc = function(sn){\n                    this.showTypeFunc(this._userMap[sn].seat, this._userMap[sn].value);\n                }.bind(this)\n            } else if (value.alreadyChess && value.alreadyChess !== undefined) {\n                for (let i = 1; i <= 5; ++i){\n                    let pukeid = isMine ? (i === 5 ? 'pai' : value.alreadyChess[i-1]) : 'pai';\n                    seat['Puke'+i].getComponent(cc.Sprite).spriteFrame = this.getPukeSpriteById(pukeid);\n                    seat['Puke'+i].active = true;\n                }\n                if (isMine)\n                    this.CuoPaiNumber = value.alreadyChess[4];\n            }\n            if (isMine)\n                this.RecentYaZhu = (value.yaFeng === 0 || value.yaFeng === undefined) ? 1 : value.yaFeng;\n            if (value.zhuang === 1) { // 1-庄家 2-闲家\n                this.CurrentZhuang = value.sort;\n                for(let i=1; i<=6; i++){\n                    let seat = this.getSeatByNumber(i);\n                    if(seat.RoomIdx === value.sort){\n                        seat.Zhuang.active = true;\n                        seat.ZhuangSp.setAnimation(0, 'Zhong', false);\n                    }\n                }\n            }\n        }\n    }\n}\n//----- 开始游戏准备\nNiuNiuManager.startGameReady = function () {\n    this.gameUICB.setBtnInviteActive(false);\n    for (let i=1; i<=6; i++){\n        let seat = this.getSeatByNumber(i);\n        seat.Readying.active = false;\n        seat.YaBox.active = false;\n    }\n}\n\n//-----------------------------------------------------------\n// 监听函数初始化\nNiuNiuManager.initListener = function () {\n    this.ListenCBList = [];\n    this.pListenCBList = [];\n    let listen = function(cmd, cb, isPingTai){\n        if (isPingTai) {\n            fun.net.pListen(cmd, cb);\n            this.pListenCBList.push(cmd);\n        } else {\n            fun.net.listen(cmd, cb);\n            this.ListenCBList.push(cmd);\n        }\n    }.bind(this)\n    listen('EnterRoom', this.onEnterRoomAck.bind(this), true);\n    listen('OffLine',   this.onOffLineAck.bind(this), true);\n    listen('NiuReady',             this.onReadyNextAck.bind(this));\n    listen('NiuQZhuang',           this.onQZhuangAck.bind(this));\n    listen('NiuYaFen',             this.onSomeOneYaZhuAck.bind(this));\n    listen('NiuStartGame',         this.onStartGameAck.bind(this));\n    listen('NiuShowCards',         this.onShowCardAck.bind(this));\n    listen('NiuSingalAccount',     this.onSingalAccountAck.bind(this));\n    listen('NiuTotalAccount',      this.onTotalAccountAck.bind(this));\n    listen('NiuLeaveRoom',         this.onLeaveRoomAck.bind(this));\n    listen('NiuDisbandRoom',       this.onDisbandRoomAck.bind(this));\n    listen('NiuDisbandRoomVote',   this.onDisbandRoomVoteAck.bind(this));\n    listen('NiuDisbandRoomResult', this.onDisbandRoomResultAck.bind(this));\n    \n}\nNiuNiuManager.cleanListener = function () {\n    for (let i in this.ListenCBList) {\n        fun.net.rmListen(this.ListenCBList[i]);\n    }\n    for (let i in this.pListenCBList) {\n        fun.net.rmPListen(this.pListenCBList[i]);\n    }\n    this.ListenCBList = [];\n    this.pListenCBList = [];\n}\n\n//--- 加入房间返回通知\nNiuNiuManager.onEnterRoomAck = function(msg){\n    if (this.checkIsMineUserId(msg.userOneMap.userId)) return;\n    if (this.SeatArray === undefined) return;\n    let roomIdx = msg.userOneMap.sort;\n    let cha = Math.abs(this.SeatArray[0] - roomIdx);\n    if (this.SeatArray[0] > roomIdx) {\n        this.SeatArray[6-cha] = roomIdx;\n    } else {\n        this.SeatArray[cha] = roomIdx;\n    }\n    let seatNumber = this.getSeatNumberByRoomIdx(roomIdx);\n    this.gameUICB.setEnterSeat(seatNumber, this.resetUserInfo(msg.userOneMap));\n    this.onOnLineAck({userId: msg.userOneMap.userId});\n}\n\n//-----------------------------------------------------------\n//--- 准备通知\nNiuNiuManager.onReadyNextAck = function(msg){\n    if(msg.hint !== undefined && msg.hint === 1){\n        this.gameUICB.setBtnReadyActive(true);\n    } else {\n        let seat = this.getSeatByUserId(msg.ready);\n        seat.Readying.active = true;\n        seat.Ying.active = false;\n        seat.Shu.active = false;\n    }\n}\n//--- 抢庄通知\nNiuNiuManager.onQZhuangAck = function(msg){\n    if(msg.hint !== undefined && msg.hint === 1){\n        if (this.data.roomRule.makersType === 3) { // 通知抢庄\n            Audio.playEffect('pork', 'remind.mp3');\n            this.setState('抢庄中');\n            this.gameUICB.setBtnInviteActive(false);\n            this.gameUICB.setBtnQZhuangActive(true);\n            this.gameUICB.showHint(PukeDefine.HINT_TEXT.WAIT_QIANG_ZHUANG);\n            for(let i=1; i<=6; i++){\n                let seat = this.getSeatByNumber(i);\n                seat.Readying.active = false;\n                if (seat.active) {\n                    this.ZeroZhuangSeat[this.ZeroZhuangSeat.length] = i;\n                }\n            }\n            this.DingZhuangTime    = 0;\n            this.StartChooseZhuang = true;\n        }\n    }\n    this.cleanSeatData();\n    if (msg.RobMakersPeopl !== undefined) { //抢庄消息\n        let seat = this.getSeatByUserId(msg.RobMakersPeopl);\n        this.QiangZhuangSeat[this.QiangZhuangSeat.length] = seat.SeatNumber;\n        if (this.checkIsMineUserId(msg.RobMakersPeopl)) {\n            this.gameUICB.setBtnQZhuangActive(false);\n        }\n    }\n    if (msg.robMakers !== undefined) {\n        let seat = this.getSeatByUserId(msg.RobMakersPeopl);\n        if (msg.robMakers === 1) {\n            this.gameUICB.setState({state: seat.State, content: '已抢庄', color: 0});\n        } else if (msg.Op === 2) {\n            this.gameUICB.setState({state: seat.State, content: '不抢庄', color: 1});\n        }\n    }\n    if (msg.Zhuangjia !== undefined) { //下发庄家\n        this.gameUICB.setBtnReadyActive(false);\n        this.onZhuangAck(msg);\n    }\n}\n//--- 游戏结算后 房间局数增加\nNiuNiuManager.roomJuShuAdd = function(){\n    this.RoundJuShu += 1;\n    if (this.RoundJuShu <= this.TotalJuShu) {\n        this.gameUICB.setJuShuText(this.RoundJuShu + '/' + this.TotalJuShu);\n    }\n}\n//--- 下发庄家通知\nNiuNiuManager.onZhuangAck = function(msg){\n    this.gameUICB.setGameStatus(2);\n    let self = this;\n    this.CurrentZhuang = this.getSeatByUserId(msg.Zhuangjia).RoomIdx;\n    this.setState(false);\n    let zhuangFunc = function(){\n        self.setState('下注中');\n        self.gameUICB.setBtnXuYaActive(parseInt(msg.Zhuangjia) === self.MineUserId ? false : true);\n        self.startGameReady();\n        if (!self._isMineNewUser) {\n            self.gameUICB.showHint(PukeDefine.HINT_TEXT.WAIT_XIA_ZHU);\n        }\n        self.gameUICB.setBtnInviteActive(false);\n        self.gameUICB.setBtnQZhuangActive(false);\n        self.setZhuangFalse();\n        let zhuangSeat = self.getSeatByUserId(msg.Zhuangjia);\n        zhuangSeat.Zhuang.active = true;\n        zhuangSeat.ZhuangSp.setAnimation(0, 'Zhong', false);\n    }\n    let resetFunc = function(){\n        self.TurnZhuang        = false;\n        self.ZeroZhuangSeat    = [];\n        self.QiangZhuangSeat   = [];\n        self.DingZhuangTime    = 0;\n        self.StartChooseZhuang = false;\n        self.qzDtTime          = 0;\n    }\n    if (this.IsFreeQiangZhuang && this.QiangZhuangSeat.length != 1) {\n        this.DingZhuangTime = PukeDefine.QIANG_ZHUANG_WAIT_TIME;\n        this.gameUICB.scheduleOnceFunc(function(){\n            resetFunc();\n            zhuangFunc();\n        }, PukeDefine.QIANG_ZHUANG_TURN_TIME);\n    } else if (this.IsFreeQiangZhuang && this.QiangZhuangSeat.length === 1) {\n        resetFunc();\n        zhuangFunc();\n    } else {\n        zhuangFunc();\n    }\n}\n//--- 押注通知\nNiuNiuManager.onSomeOneYaZhuAck = function(msg){\n    if (msg.hint !== undefined && msg.hint === 1) {\n        if (this.data.roomRule.makersType !== 3) {\n            Audio.playEffect('pork', 'remind.mp3');\n        }\n        this.gameUICB.showHint(PukeDefine.HINT_TEXT.WAIT_XIA_ZHU);\n        this.gameUICB.setBtnXiaZhuActive(true);\n        this.startGameReady();\n        this.gameUICB.showXiaZhu(msg.canBetScore);\n        this.cleanSeatData();  //清理单局结算\n        if (this.gameUICB.getIsXuYa() && this.RecentYaZhu) {\n            this.gameUICB.scheduleOnceFunc(function(){\n                if (this.RecentYaZhu === 1) {\n                    this.gameUICB.onBtnXiaZhuClicked('', 1);\n                } else if (this.RecentYaZhu === 2) {\n                    this.gameUICB.onBtnXiaZhuClicked('', 2);\n                } else if (this.RecentYaZhu === 3) {\n                    this.gameUICB.onBtnXiaZhuClicked('', 3);\n                }\n            }.bind(this), PukeDefine.ZI_DONG_XU_YA_TIME);\n        }\n        if (msg.xianScore !== undefined && msg.xianScore > 0) {\n            this.XianTuiZhuScore = msg.xianScore;\n            this.gameUICB.setBtnTuiZhuActive(true);\n        }\n    } else {\n        if (this.checkIsMineUserId(msg.userId)) {\n            this.gameUICB.setBtnXiaZhuActive(false);\n            this.gameUICB.setBtnTuiZhuActive(false);\n        }\n        let seat = this.getSeatByUserId(msg.userId);\n        seat.YaBox.active = true;\n        seat.YaZhu.string = msg.betScore;\n        this.gameUICB.setState({state: seat.State, content: '已下注', color: 0});\n        this.pushGold(seat.SeatNumber, msg.betScore);\n    }\n}\n//--- 开始游戏通知\nNiuNiuManager.onStartGameAck = function(msg){\n    let self = this;\n    this._isShowCard = false;\n    this._showType = {niuThree: msg.niuThree, niuTwo: msg.niuTwo, niuType: msg.niuType}\n    this.roomJuShuAdd();\n    this.gameUICB.setGameStatus(6);\n    if (!self._isMineNewUser) {\n        this.gameUICB.showHint(false);\n    }\n    this.setState(false);\n    this.isCuoPaiComplete = false;\n    this.gameUICB.scheduleOnceFunc(function(){\n        let sortCardsMap = new Array();\n        let seatNumber;\n        if (self.data.roomRule.makersType === 4) {\n            seatNumber = 1;\n        } else {\n            seatNumber = self.getSeatNumberByRoomIdx(self.CurrentZhuang);\n        }\n        for (let i in msg.currentPlayer) {\n            let id = msg.currentPlayer[i];\n            for (let i=1; i<=6; ++i) {\n                let seat = self.getSeatByNumber(i);\n                if (parseInt(id) === seat.UserId) {\n                    let cha = seatNumber - seat.SeatNumber;\n                    let idx = cha >= 0 ? cha : (6 - Math.abs(cha));\n                    sortCardsMap[idx] = {};\n                    sortCardsMap[idx].UserId = id;\n                    sortCardsMap[idx].Cards = parseInt(id) === self.MineUserId ? msg.alreadyChess : {};\n                }\n            }\n        }\n        let pukes = [], idx = -1, seats = [];\n        for (let k in sortCardsMap) {\n            let value = sortCardsMap[k];\n            for (let i=1; i<=6; ++i) {\n                let seat = self.getSeatByNumber(i);\n                seat.Readying.active = false;\n                if (seat.UserId === parseInt(value.UserId)) {\n                    seats.push(seat);\n                    let pos = seat.getPosition();\n                    if (i === 1) {\n                        seats.myCards = value.Cards;\n                        self.CuoPaiNumber = value.Cards[4];\n                    }\n                    for (let j=1; j<=5; ++j) {\n                        idx++;\n                        let fuhao = (j === 1 || j === 2 ) ? -j : ((j === 4 || j === 5) ? (j-3) : 0);\n                        pukes[idx] = {};\n                        pukes[idx].x = i === 1 ? (fuhao * 30) : (pos.x + fuhao * 30);\n                        pukes[idx].y = i === 1 ? pos.y * 0.8 : pos.y - seat.getContentSize().width/1.58;\n                    }\n                }\n            }\n        }\n        self.faPaiPukes = pukes;\n        self.faPaiSeats = seats;\n        self.faPaiAnimation(0);\n    }, PukeDefine.SEND_CARD_DELAY);\n}\n//--- 显示牌通知\nNiuNiuManager.onShowCardAck = function(msg){\n    if (msg.hint !== undefined && msg.hint === 1) {\n        if (this._isShowCard){\n            this.gameUICB.setBtnCuoPaiActive(true);\n        }\n        return;\n    }\n    this.gameUICB.setGameStatus(3);\n    let showType = msg.showType;\n    if (showType.niuTwo === undefined || showType.niuTwo[0] === undefined) return;\n    let seat = this.getSeatByUserId(msg.userId);\n    this.gameUICB.setState({state: seat.State, content: '已亮牌', color: 0});\n    if (parseInt(msg.userId) === seat.UserId) {\n        let isMine = this.checkIsMineUserId(msg.userId);\n        if (isMine && !this.isCuoPaiComplete) {\n            this.cuoPaiAnimation('showCard', showType);\n            this.showTypeFunc(seat, showType);\n        } else {\n            let pos = isMine ? 'MINE_ACCOUNT' : 'OTHER_ACCOUNT';\n            for (let i = 1; i <= 3; ++i){\n                let puke = this.getPukeSpriteById(showType.niuThree[i-1]);\n                seat['Puke'+i].getComponent(cc.Sprite).spriteFrame = puke;\n                seat['Puke'+i].setPositionX(PukeDefine.POSITION.PUKE.NIU_NIU[i][pos].x);\n            }\n            for (let i = 4; i <= 5; ++i){\n                let puke = this.getPukeSpriteById(showType.niuTwo[i-4]);\n                seat['Puke'+i].getComponent(cc.Sprite).spriteFrame = puke;\n                seat['Puke'+i].setPositionX(PukeDefine.POSITION.PUKE.NIU_NIU[i][pos].x);\n            }\n            this.showTypeFunc(seat, showType);\n        }\n    }\n}\n//--- 显示点数\nNiuNiuManager.showTypeFunc = function (seat, value) {\n    let anim = 'WuniuX1';\n    let niuType = value.niuType;\n    if (niuType === 0) {\n        anim = 'WuniuX1';\n    } else if (niuType >= 6 && niuType <= 10) {\n        anim = PukeDefine.NIUNIU_ROOM_INFO.TYPE_SCORE_EN[this.TypeScore-1][niuType-6];\n    } else if (niuType === 11) {\n        anim = 'KandouX5';\n    } else if (niuType === 12) {\n        anim = 'SihuaX5';\n    } else if (niuType === 13) {\n        anim = this.WuHua === 1 ? 'WuhuaX6' : 'WuhuaX5';\n    } else if (niuType === 14) {\n        anim = this.ZhaDan === 1 ? 'ZhadanX8' : 'ZhadanX6';\n    } else if (niuType === 15) {\n        anim = this.WuXiao === 1 ? 'WuxiaoniuX10' : 'WuxiaoniuX6';\n    } else {\n        anim = 'Niu' + niuType + 'X1';\n    }\n    cc.log('--- anim : ' + anim + ', ' + niuType)\n    seat.ShuZi.active = true;\n    seat.ShuZiSp.setAnimation(0, anim, false);\n    if (this.checkIsMineUserId(seat.UserId)){\n        let type = PukeDefine.NIUNIU_ROOM_INFO.PAI_JU_SCORE['NIU_NIU'][value.niuType];\n        let sex = this.UserInfo.Sex === 1 ? 'male' : 'female';\n        Audio.playEffect('pork', type+'.mp3', sex);\n    }\n}\n//--- 单局通知\nNiuNiuManager.onSingalAccountAck = function(msg){\n    if (msg.isClean !== undefined && msg.isClean === 1) return;\n    this.gameUICB.setGameStatus(4);\n    this.callInGold(msg);\n    this.setState(false);\n}\nNiuNiuManager.onAccountFunc = function(msg){\n    for (let id in msg.gameOver) {\n        cc.log(id)\n        let value = msg.gameOver[id];\n        if (value.newUser === undefined) {\n            let seat  = this.getSeatByUserId(id);\n            if (value.score > 0) {\n                seat.Ying.active = true;\n                seat.Shu.active  = false;\n                seat.YingLabel.string = '+' + value.score;\n            } else {\n                seat.Ying.active = false;\n                seat.Shu.active  = true;\n                seat.ShuLabel.string = value.score;\n            }\n            seat.Fen.string = value.totalScore;\n            if (!seat.ShuZi.active) {\n                this.showTypeFunc(seat, value);\n            }\n        }\n    }\n    if (this.RoundJuShu < this.TotalJuShu) {\n        this.gameUICB.scheduleOnceFunc(function(){\n            this.gameUICB.showHint(PukeDefine.HINT_TEXT.WAIT_READY);\n            this._isMineNewUser = false;\n            this.gameUICB.setBtnReadyActive(true);\n            this.gameUICB.setGameStatus(1);\n        }.bind(this), PukeDefine.ACCOUNT_CURRENT_JUSHU);\n    }\n}\n//--- 总结算通知\nNiuNiuManager.onTotalAccountAck = function(msg){\n    msg.RoomId = this.RoomId;\n    msg.JuShu = this.TotalJuShu;\n    msg.DiFen = this.DiFen[0];\n    msg.ZhuangWei = this.ZhuangWei;\n    msg.highestScore = 0;\n    let count = -1;\n    let newData = new Array();\n    for (let id in msg.gameOver) {\n        let value = msg.gameOver[id];\n        let seat = this.getSeatByUserId(id);\n        msg.highestScore = Math.max(value.totalScore, msg.highestScore);\n        count++;\n        newData[count] = {};\n        newData[count].id = id;\n        newData[count].score = value.totalScore;\n        // newData[count].name  = seat.Name.string;\n        newData[count].name = seat._Name;\n        newData[count].head = seat.HeadUrl;\n        newData[count].left = 99;\n        newData[count].lost = value.Deduc;\n    }\n    newData.sort(function(a, b){ return a.score < b.score; });\n    msg.sortAccounts = newData;\n\n    this.gameUICB.showHint(PukeDefine.HINT_TEXT.WAIT_TOTAL_ACCOUNT);\n    let time = PukeDefine.TOTAL_ACCOUNT_SHOW_TIME;\n    if (this.copyDisbandPrefab) {\n        this.copyDisbandPrefab.destroy();\n        time = 0.1;\n    }\n    this.copyTotalAccount = this.gameUICB.onTotalAccountAck();\n    this.copyTotalAccount.setPosition(0, 0);\n    this.gameUICB.setCountDownTime(true, time);\n    this.gameUICB.scheduleOnceFunc(function(){\n        this.gameUICB.setCountDownTime(false);\n        this.gameUICB.showHint(false);\n        this.gameUICB.getChildNode().getChildByName('totalaccount').addChild(this.copyTotalAccount);\n        this.copyTotalAccount.getComponent('PukeAccount').initTotalAccount(msg);\n    }.bind(this), time);\n}\n\n// 离开(解散)房间\nNiuNiuManager.onLeaveRoomAck = function(msg){\n    if (this.checkIsMineUserId(msg.userId)) {\n        cc.director.loadScene('hall');\n    } else {\n        let seat = this.getSeatByUserId(msg.userId);\n        let pukeNumber = PukeDefine.GAME_TYPE[this.data.GameType].PUKE_NUMBER;\n        this.gameUICB.resetSeat(seat.SeatNumber, pukeNumber);\n    }\n}\nNiuNiuManager.onDisbandRoomAck = function(msg){\n    if (msg.breakStatu === 1) {\n        cc.director.loadScene('hall');\n    }\n}\nNiuNiuManager.onDisbandRoomVoteAck = function(msg){\n    this.gameUICB.setGameStatus(6);\n    this.gameUICB.setMenuBgActive(false);\n    for (let id in msg.applyBreakStatu) {\n        if (msg.applyBreakStatu[id] === 2) {\n            this.gameUICB.scheduleOnceFunc(function(){\n                if (this.copyDisbandPrefab) {\n                    this.copyDisbandPrefab.active = false;\n                }\n            }.bind(this), PukeDefine.DISBAND_ROOM_DELAY_TIME);\n        }\n    }\n    this.inDisbandRoomFunc(msg);\n}\nNiuNiuManager.onDisbandRoomResultAck = function(msg){\n    if(msg.breakStatu !== undefined && msg.breakStatu !== 1) {\n        fun.event.dispatch('MinSingleButtonPop', {contentStr: '解散房间失败'});\n    }\n}\nNiuNiuManager.inDisbandRoomFunc = function(msg){\n    if (!this.copyDisbandPrefab) {\n        this.copyDisbandPrefab = this.gameUICB.getDisband();\n    }\n    this.copyDisbandPrefab.active = true;\n    msg.GameType = 'niuniu';\n    for (let i = 1; i <= 6; i++) {\n        let seat = this.getSeatByNumber(i);\n        for (let id in msg.applyStatu) {\n            if (id == seat.UserId) {\n                let state = msg.applyStatu[id];\n                msg.applyStatu[id] = {};\n                msg.applyStatu[id].state = state;\n                msg.applyStatu[id].name = seat.Name.string;\n                msg.applyStatu[id].headUrl = seat.HeadUrl;\n            }\n        }\n    }\n    this.copyDisbandPrefab.getComponent('PukeDisband').disbandRoomInit(msg);\n}\n// 上线 离线\nNiuNiuManager.onOnLineAck = function(msg){\n    if (!msg || msg.userId === undefined) return;\n    let seat = this.getSeatByUserId(msg.userId);\n    seat.Mask.active = false;\n}\nNiuNiuManager.onOffLineAck = function(msg){\n    if (!msg || msg.userId === undefined) return;\n    let seat = this.getSeatByUserId(msg.userId);\n    seat.Mask.active = true;\n}\n\n//-----------------------------------------------------------\n//--- 押注大小\nNiuNiuManager.YaZhuFunction = function (yanum) {\n    if (this.data.roomRule.bottomScore == 4) {\n        yanum = 1;\n    }\n    this.RecentYaZhu = parseInt(yanum);\n    let yaFen = {\n        betScore : this.DiFen[yanum-1], //压分\n        xianScore : 0 //闲家推注分数\n    }\n    fun.net.send('NiuYaFen', yaFen);\n}\n//--- 推注\nNiuNiuManager.TuiZhuFunction = function () {\n    let seat = this.getSeatByUserId(this.MineUserId);\n    let yaFen = {\n        betScore : 0, //压分\n        xianScore : this.XianTuiZhuScore //闲家推注分数\n    }\n    fun.net.send('NiuYaFen', yaFen, function(rsp){\n        if (rsp.returnStatu !== undefined && rsp.returnStatu === 1) {\n            this.gameUICB.setBtnXiaZhuActive(false);\n            this.gameUICB.setBtnTuiZhuActive(false);\n        }\n    }.bind(this));\n}\n//--- 离开(解散)房间\nNiuNiuManager.LeaveRoomFunction = function () {\n    let state = this.gameUICB.getGameStatus();\n    let jushu = this.gameUICB.getJuShuText();\n    if (((state === 1 || state == 0) && jushu.substring(0, 1) === '0') || this._isMineNewUser) {\n        if (this.MineIsMaster) {\n            fun.net.send('NiuDisbandRoom', {}, function(rsp){\n                cc.log(rsp)\n                if (rsp.returnStatu !== undefined && rsp.returnStatu === 1) {\n                    cc.director.loadScene('hall');\n                }\n            }.bind(this));\n        } else {\n            fun.net.send('NiuLeaveRoom', {}, function(rsp){\n                if(rsp.returnStatu !== undefined && rsp.returnStatu === 1){\n                    cc.director.loadScene('hall');\n                }\n            }.bind(this));\n        }\n    } else {\n        fun.net.send('NiuDisbandRoomVote', {applyStatu: 0});\n    }\n}\n//--- 准备\nNiuNiuManager.ReadyFunction = function () {\n    fun.net.send('NiuReady', {}, function(rsp){\n        this._isMineNewUser = false;\n        this.gameUICB.setBtnReadyActive(false);\n        this.MineSeat.Readying.active = true;\n    }.bind(this));\n}\n//--- 抢庄\nNiuNiuManager.QZhuangFunction = function (type) {\n    let qz = type === 0 ? 1 : 2;\n    fun.net.send('NiuQZhuang', {robMakers: qz});\n    this.gameUICB.setBtnQZhuangActive(false);\n}\n//--- 微信分享\nNiuNiuManager.wxShare = function () {\n    let jushu    = this.TotalJuShu + '局';\n    let difen    = '底分' + this.DiFen[0];\n    let info     = {};\n    info.title   = '牛牛-房间号：' + this.data.roomRule.RoomId;\n    info.content = jushu + ', ' + this.Charge + ', ' + this.ZhuangWei + ', ' + difen;\n    require('JSPhoneWeChat').WxShareFriend(info);\n}\n\nmodule.exports = NiuNiuManager;"]}