{"version":3,"sources":["../../../../../../assets/hall/script/mailLayer/assets/hall/script/mailLayer/mailDetail.js"],"names":["cc","Class","extends","Component","properties","timeLabel","type","Label","default","contentLabel","cardImg","Sprite","voucherImg","cardNum","okBtn","Button","closeBtnLabel","closeBtn","Node","init","data","_data","string","timeStr","cont","mType","node","active","att","opt","once","onOkBtnClick","onCloseBtnClick","onEnable","getComponent","Animation","play","require","playEffect","animState","callback","destroy","bind"],"mappings":"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","file":"mailDetail.js","sourceRoot":"../../../../../../assets/hall/script/mailLayer","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        timeLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        contentLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        cardImg: {\n            type: cc.Sprite,\n            default: null,\n        },\n\n        voucherImg: {\n            type: cc.Sprite,\n            default: null,\n        },\n\n        // hySp: {\n        //     type: cc.SpriteFrame,\n        //     default: null,\n        // },\n\n        // wlSp: {\n        //     type: cc.SpriteFrame,\n        //     default: null,\n        // },\n\n        cardNum: {\n            type: cc.Label,\n            default: null,\n        },\n\n        okBtn: {\n            type: cc.Button,\n            default: null,\n        },\n\n        closeBtnLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        closeBtn: cc.Node,\n    },\n\n    init (data) {\n        this._data = data;\n        this.timeLabel.string = data.timeStr;\n        this.contentLabel.string = data.cont;\n        if (data.mType === 1) { //无附件\n            this.cardImg.node.active = false;\n            this.voucherImg.node.active = false;\n            this.closeBtnLabel.string = '关闭';\n            this.closeBtn.active = false;\n        } else { //有附件\n            this.closeBtnLabel.string = '领取';\n            this.closeBtn.active = true;\n            if (data.att.opt === 3) {\n                this.cardImg.node.active = false;\n                this.voucherImg.node.active = true;\n            } else {\n                this.cardImg.node.active = true;\n                this.voucherImg.node.active = false;\n            }\n        }\n        if (data.att.data === 0) {\n            this.cardNum.node.active = false;\n        } else {\n            this.cardNum.node.active = true;\n            if (data.att.opt === 0) { //兑换券\n\n            } else { //房卡\n\n            }\n            this.cardNum.string = data.att.data;\n        }\n        this.okBtn.node.once('click', this.onOkBtnClick, this);\n        this.closeBtn.once('click', this.onCloseBtnClick, this);\n    },\n\n    onEnable() {\n        this.node.getComponent(cc.Animation).play('popScaleAnim');\n    },\n\n    onOkBtnClick() {\n        require('Audio').playEffect('hall', 'button_close.mp3');\n        let animState = this.node.getComponent(cc.Animation).play('popScaleOut');\n        animState.once('finished', function () {\n            if (this._data.mType !== 1) {\n                this._data.callback();\n            }\n            this.node.destroy();\n        }.bind(this));\n    },\n\n    onCloseBtnClick() {\n        require('Audio').playEffect('hall', 'button_close.mp3');\n        let animState = this.node.getComponent(cc.Animation).play('popScaleOut');\n        animState.once('finished', function () {\n            this.node.destroy();\n        }.bind(this));\n    }\n\n});\n"]}