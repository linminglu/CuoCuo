{"version":3,"sources":["../../../../../../assets/mahjong/script/ui/assets/mahjong/script/ui/mjReplayUI.js"],"names":["gameReplayMgr","require","mjDataMgr","cc","Class","extends","Component","properties","replayNode","Node","btnGameContent","GameContentN","btnMenuN","reduceN","roomIdN","onLoad","hdieReplay","init","btnPlayN","getChildByName","btnStopN","btnSpeed1N","curSpeed","btnBackN","on","onBtnPlayClicked","onBtnStopClicked","onBtnSpeedClicked","onBtnBackClicked","active","speedIndex","speedList","refreSpeedScale","initGameContent","update","dt","onDestroy","roomShowList","get","KEYS","ROOMINFO","showList","forEach","itemData","index","cN","getComponent","Label","string","content","bind","showReplay","onBtnGameContentClick","animation","Animation","clips","getClips","play","name","onBtnGameContentBack","once","endReplay","btn","resume","stop","event","length","speed","setSpeedScale"],"mappings":"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","file":"mjReplayUI.js","sourceRoot":"../../../../../../assets/mahjong/script/ui","sourcesContent":["// var gameManager   = require(\"mjGameManager\");\n// var utils         = require(\"utils\");\nvar gameReplayMgr = require(\"mjReplayMgr\");\nvar mjDataMgr     = require(\"mjDataMgr\");\n// var log           = utils.log;\n////var Audio.         = require(\"Audio\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        replayNode : cc.Node,  \n        btnGameContent : cc.Node,\n        GameContentN  : cc.Node,\n        btnMenuN      : cc.Node,\n        reduceN       : cc.Node,\n        roomIdN       : cc.Node,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.hdieReplay();\n        // gameReplayMgr   = gameReplayMgr;\n        gameReplayMgr.init(this);\n        this.btnPlayN   = this.replayNode.getChildByName(\"btnPlay\");\n        this.btnStopN   = this.replayNode.getChildByName(\"btnStop\");\n        this.btnSpeed1N = this.replayNode.getChildByName(\"btnSpeed_1\");\n        this.curSpeed   = this.replayNode.getChildByName(\"curSpeed\");\n        this.btnBackN   = this.replayNode.getChildByName(\"btnBack\");\n\n        this.btnPlayN.on(\"touchend\", this.onBtnPlayClicked, this);\n        this.btnStopN.on(\"touchend\", this.onBtnStopClicked, this);\n        this.btnSpeed1N.on(\"touchend\", this.onBtnSpeedClicked, this);\n        this.btnBackN.on(\"touchend\", this.onBtnBackClicked, this);\n\n        this.btnSpeed1N.active = true;\n        this.btnPlayN.active   = true;\n        this.btnStopN.active   = false;\n        this.speedIndex        = 0;\n        this.speedList         = [1, 2, 4];\n        this.refreSpeedScale();\n        this.initGameContent();\n    },\n\n    update : function(dt){\n        gameReplayMgr.update(dt)\n    },\n\n    onDestroy : function(){\n        gameReplayMgr.onDestroy()\n    },\n\n    initGameContent(){\n        var roomShowList = mjDataMgr.get(mjDataMgr.KEYS.ROOMINFO).showList;\n        roomShowList.forEach(function(itemData, index){\n            let cN = this.GameContentN.getChildByName(\"content\" + (index+1));\n            cN.active = true;\n            cN.getComponent(cc.Label).string = itemData.content;\n            // content += \" \" +itemData.name +\":\" + itemData.content;\n        }.bind(this));\n        this.GameContentN.getChildByName(\"hitzone\").active = false;\n    },\n\n    showReplay : function(){\n        this.replayNode.active = true;\n        // this.btnGameContent.active = true;\n        this.btnMenuN.active      = false;\n        this.roomIdN.active       = true;\n        // this.reduceN.setPosition(580, -270);\n    },\n\n    hdieReplay : function(){\n        this.replayNode.active = false;\n        // this.btnGameContent.active = false;\n    },\n\n    onBtnGameContentClick(){\n        this.GameContentN.active = true;\n        let animation            = this.GameContentN.getComponent(cc.Animation);\n        let clips                = animation.getClips();\n        animation.play(animation.getClips()[0].name);\n        this.btnGameContent.active = false;\n        this.GameContentN.getChildByName(\"hitzone\").active = true;\n    },\n\n    onBtnGameContentBack(){\n        this.GameContentN.getChildByName(\"hitzone\").active = false;\n        let animation            = this.GameContentN.getComponent(cc.Animation);\n        let clips                = animation.getClips();\n        animation.play(animation.getClips()[1].name).once('finished', function () {\n            this.GameContentN.active = false;\n            this.btnGameContent.active = true;\n        }, this);;\n    },\n\n    onBtnBackClicked : function(){\n        gameReplayMgr.endReplay();\n    },\n\n    onBtnPlayClicked : function(){\n        this.btnPlayN.active   = false;\n        this.btnStopN.active   = true;\n        this.btn\n        gameReplayMgr.resume();\n    },\n\n    onBtnStopClicked : function(){\n        this.btnPlayN.active   = true;\n        this.btnStopN.active   = false;\n        gameReplayMgr.stop();\n    },\n\n    onBtnSpeedClicked : function(event){\n        this.speedIndex += 1;\n        this.speedIndex = this.speedIndex % this.speedList.length\n        this.refreSpeedScale();\n    },\n\n    refreSpeedScale : function(){\n        var speed = this.speedList[this.speedIndex];\n        gameReplayMgr.setSpeedScale(speed);\n        this.curSpeed.getComponent(cc.Label).string =\" x\" + speed;\n    },\n\n});\n"]}