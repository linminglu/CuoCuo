{"version":3,"sources":["../../../../../../assets/poker/script/pukeComm/assets/poker/script/pukeComm/PukeCommUI.js"],"names":["PukeDefine","require","PukeData","PukeUtils","cc","Class","extends","Component","properties","Background","Node","phoneStatus","onLoad","init","skinPeeler","getSkin","scheduleTime","refreTimeCount","start","fun","event","add","bind","batteryStatus","netStatus","getNetBatteryStatus","update","dt","totalDtTime","onDestroy","remove","date","Date","lastMinutes","getMinutes","minutesStr","hoursStr","getHours","systemTime","getChildByName","getComponent","Label","string","msg","isCharge","progress","active","status","ProgressBar","level","wifi","signal","i","strength","sg","skinNum","self","LoadRes","BACKGROUND","frame","Sprite","spriteFrame"],"mappings":"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","file":"PukeCommUI.js","sourceRoot":"../../../../../../assets/poker/script/pukeComm","sourcesContent":["let PukeDefine = require('PukeDefine');\nlet PukeData   = require('PukeData');\nlet PukeUtils  = require('PukeUtils');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        Background: cc.Node,\n        phoneStatus: cc.Node\n    },\n\n    onLoad: function () {\n        PukeData.init();\n        this.skinPeeler(PukeData.getSkin());\n        this.scheduleTime();  //时间显示\n        this.refreTimeCount = 1;\n    },\n\n    start: function () {\n        fun.event.add('PukeCommUI_PukeSkin', 'PukeSkin',     this.skinPeeler.bind(this));\n        fun.event.add('PukeCommUI_Battery',  'PhoneBattery', this.batteryStatus.bind(this));\n        fun.event.add('PukeCommUI_Net',      'PhoneNet',     this.netStatus.bind(this));\n        require('JSPhoneNetBattery').getNetBatteryStatus();\n    },\n    \n    update: function(dt){\n        this.totalDtTime = (this.totalDtTime || 0) + dt;\n        if(this.totalDtTime > this.refreTimeCount){\n            this.totalDtTime -= this.refreTimeCount;\n            this.scheduleTime();\n        }\n    },\n\n    onDestroy: function(){\n        fun.event.remove('PukeCommUI_PukeSkin');\n        fun.event.remove('PukeCommUI_Battery');\n        fun.event.remove('PukeCommUI_Net');\n    },\n\n    //-- 显示系统时间\n    scheduleTime: function () {\n        let date = new Date();\n        this.lastMinutes = this.lastMinutes || date.getMinutes();\n        let minutesStr = date.getMinutes() < 10 ? \"0\"+ date.getMinutes() : date.getMinutes();\n        let hoursStr = date.getHours() < 10 ? \"0\"+ date.getHours() : date.getHours();\n        let systemTime = date.getHours() + \":\" + minutesStr\n        if(this.lastMinutes < date.getMinutes() && this.refreTimeCount == 1){\n            this.refreTimeCount = 30;\n        }\n        this.lastMinutes = date.getMinutes();\n        this.phoneStatus.getChildByName(\"time\").getComponent(cc.Label).string = systemTime;\n    },\n\n    //-- 电池状态\n    batteryStatus: function(msg){\n        let isCharge = this.phoneStatus.getChildByName(\"charge\");\n        let progress = this.phoneStatus.getChildByName(\"battery\");\n        isCharge.active = (msg.status === 0 || msg.status === 1) ? false : true;\n        progress.getComponent(cc.ProgressBar).progress = msg.level/100; \n    },\n\n    //-- 网络状态\n    netStatus: function(msg){\n        let wifi = this.phoneStatus.getChildByName(\"wifi\");\n        let signal = this.phoneStatus.getChildByName(\"signal\");\n        if (msg.status === 5){\n            wifi.active = true;\n            signal.active = false;\n            for (let i=1; i<=4; ++i) {\n                wifi.getChildByName('pk_wifi_'+i).active = false;\n            }\n            wifi.getChildByName('pk_wifi_'+msg.strength).active = true;\n        } else {\n            wifi.active = false;\n            signal.active = true;\n            for (let i=1; i<=5; ++i) {\n                signal.getChildByName('pk_signal_'+i).active = false;\n            }\n            let sg = msg.signal;\n            signal.getChildByName('pk_signal_'+(msg.signal+1)).active = true;\n        }\n    },\n\n    //-- 换肤\n    skinPeeler: function(skinNum){\n        let self = this;\n        PukeUtils.LoadRes(PukeDefine.BACKGROUND[skinNum-1], \"SpriteFrame\", function(frame){\n            self.Background.getComponent(cc.Sprite).spriteFrame = frame;\n        });\n    }\n\n});\n"]}