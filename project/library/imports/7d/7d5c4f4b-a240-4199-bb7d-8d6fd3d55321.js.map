{"version":3,"sources":["../../../../../../../assets/mahjong/script/game/paiju/assets/mahjong/script/game/paiju/mjPaijuZuo.js"],"names":["mjDataMgr","require","zuoControl","init","paiScale","get","KEYS","CFG","pengGangHeng","pengGangZhi","gangDiff","shouWidth","EndWidth","EndHeight","is3DView","cc","sys","localStorage","getItem","fun","event","add","onViewChange","bind","_OnDestroy","remove","initRound","superInitRound","shouPaiN","y","pengStartPos","pengGangPaiN","isPlaying","refreDachuPai","checkPaiNode","getPaiData","shouShangPai","refreShouPai","refreBuhua","refrePengGangPos","getBgFrame","pai","PaiType","PAISHOWTYPE","bgFrameName","showType","PENG","PENGBY","SHOUGAI","SHOU","END","GAI","getPengGangInfo","pengGangLen","index","pIndex","info","zOrder","width","paiZoneList","len","pos","p","contentPos","curScale","getPai3dInfo","posScale","x","getShouPaiInfo","shouLen","isMo","gangList","pengGangPai","gang","pengList","peng","length","startScale","zoomScale","Math","pow","skewY","skewX","setDachuPaiPos","paiNode","setPosition","getDachuInfo","setLocalZOrder","getBuhuaInfo","sfScale","horizontal","honIndex","verIndex","floor","setShouRelativePos","totalLen","paiListNode","height","getNewMoveAction","newPos","curPos","moveY","action1","moveBy","action2","getDisTime","action3","sequence","module","exports","instance"],"mappings":"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","file":"mjPaijuZuo.js","sourceRoot":"../../../../../../../assets/mahjong/script/game/paiju","sourcesContent":["var mjDataMgr     = require(\"mjDataMgr\");\n\n/////////////////////////////// 左方玩家 //////////////////////////////////////////////////////////\n\nvar zuoControl = function(){\n    this.init = function(){\n        this.paiScale        =mjDataMgr.get(mjDataMgr.KEYS.CFG).paiScale || 1;\n        this.pengGangHeng = 28 * this.paiScale;\n        this.pengGangZhi  = 41 * this.paiScale;\n        this.gangDiff     = 20 ;\n        this.shouWidth    = 26 * this.paiScale;\n        this.EndWidth        = -48.5;\n        this.EndHeight       = -28;\n        this.is3DView     = cc.sys.localStorage.getItem(\"mjEyeView\") == \"3D\";\n        fun.event.add(\"mjViewChangZuo\", \"mjViewChange\", this.onViewChange.bind(this));\n    }\n    this._OnDestroy = function(){\n        fun.event.remove(\"mjViewChangZuo\");\n    }\n\n\n    this.initRound = function(){\n        this.superInitRound();\n        this.shouPaiN.y     = this.pengStartPos.y;\n        this.pengGangPaiN.y = this.pengStartPos.y;\n        \n    }\n\n    this.onViewChange = function(){\n        this.is3DView           = cc.sys.localStorage.getItem(\"mjEyeView\") ==\"3D\";\n        if(!require(\"mjGameManager\").isPlaying){return}\n        // this.removeNodeChild(this.dachuPaiN);\n        // this.removeNodeChild(this.shouPaiN);\n        // this.removeNodeChild(this.buhuaPaiN);\n        this.refreDachuPai()\n        this.checkPaiNode(this.shouPaiN, this.getPaiData().shouShangPai)\n        this.refreShouPai();\n        this.refreBuhua();\n        // this.removeNodeChild(this.pengGangPaiN);\n        this.refrePengGangPos()\n        // this.refre        \n\n    }\n\n    // this.setShouPaiPos =  function(paiNode, pai, shouLen, isMo, index){\n    //     var width = this.paiZoneList[pai.showType];\n    //     shouLen   = isMo  ?  shouLen + width / 2 : shouLen\n    //     paiNode.setPosition(cc.p(0, 0-shouLen));\n    //     paiNode.setLocalZOrder(index);\n    //     return( shouLen + width );\n    // }\n\n    this.getBgFrame = function(pai){\n        var PaiType   = require(\"mjGameDefine\").PAISHOWTYPE; \n        var bgFrameName = \"\";\n        if(pai.showType == PaiType.PENG){\n            bgFrameName = !this.is3DView ? \"zy_heng\" : \"z_p_0\"\n        }else if(pai.showType == PaiType.PENGBY){\n            bgFrameName = !this.is3DView ? \"zy_tang\" : \"z_pb_0\"\n        }else if(pai.showType == PaiType.SHOUGAI){\n            bgFrameName = !this.is3DView ? \"zy_gai\" : \"z_gai\"\n        }else if(pai.showType == PaiType.SHOU){\n            bgFrameName = !this.is3DView ? \"zy_shou\" : \"z_s_0\"\n        }else if(pai.showType == PaiType.END){\n            bgFrameName = !this.is3DView ? \"zy_heng\" : \"z_d_\"\n        }else if(pai.showType == PaiType.GAI){\n            bgFrameName = !this.is3DView ? \"zy_gai\" : \"z_gai\"\n        }\n        return bgFrameName\n    }\n\n    this.getPengGangInfo = function(pai, pengGangLen, index, pIndex){      \n        var PaiType   = require(\"mjGameDefine\").PAISHOWTYPE; \n        var info      = {}\n        info.zOrder   = index;\n        var width     = this.paiZoneList[pai.showType];\n        info.is3DView = this.is3DView;\n        info.len      = pengGangLen;\n        info.bgFrameName= this.getBgFrame(pai); \n        if(!this.is3DView){\n            if(index == 3){\n                info.pos = cc.p(5, 0-pengGangLen+width+this.pengGangHeng);\n            }else {\n                info.pos = cc.p(0, 0-pengGangLen);\n            }\n\n            if(pai.showType == PaiType.PENG){\n                // info.bgFrameName = \"zy_heng\";\n                info.contentPos = cc.p(-1, -16);\n                info.curScale    = this.paiScale * 0.98;\n            }else if(pai.showType == PaiType.GAI){\n                // info.bgFrameName = \"zy_gai\";\n                info.curScale    = this.paiScale * 0.92\n            }else {\n                // info.bgFrameName = \"zy_tang\";\n            }\n            if(pai.showType == PaiType.PENGBY){\n                info.contentPos = cc.p(0, -20);\n            }                      \n        }else{\n            info        = this.getPai3dInfo(pai, pIndex, pengGangLen, info);\n            width       =  width *  info.posScale;\n            if(index == 3){\n                info.pos.y += this.pengGangHeng * 2.2 * info.posScale;\n                info.pos.x += 8 * info.posScale;\n            }\n           \n            \n        }\n        info.len = (index != 3 ) ? info.len + width : info.len;\n       \n        return info;\n    }\n\n\n\n\n\n    this.getShouPaiInfo =  function(pai, shouLen, isMo, index){\n        var info      = {}\n        info.zOrder   = index;\n        info.is3DView = this.is3DView;\n        info.bgFrameName =  this.getBgFrame(pai);\n        if(!this.is3DView){\n            shouLen      = isMo  ?  shouLen + this.shouWidth / 2 : shouLen\n            info.pos     = cc.p(0, 0 - shouLen);\n            info.shouLen = shouLen + this.shouWidth\n            \n        }else {\n            var gangList     = this.getPaiData().pengGangPai.gang;\n            var pengList     = this.getPaiData().pengGangPai.peng;\n            var pIndex       = (gangList.length + pengList.length) * 3 + index;\n            shouLen          = (isMo  ?  shouLen + this.shouWidth / 2 : shouLen);\n            info             = this.getPai3dInfo(pai, pIndex, shouLen, info);\n            var width        = 23.5 * info.posScale;\n            info.shouLen     = shouLen  + width;\n        }\n        return info;\n    }\n\n\n    this.getPai3dInfo = function(pai, index, shouLen, info){\n        var PaiType   = require(\"mjGameDefine\").PAISHOWTYPE;\n        var startScale = 0.5;\n        var zoomScale  = 1.022;\n        info.posScale = Math.pow(1.018, index) * 0.76;\n        info.pos      = cc.p(index * -5*info.posScale + 70 ,  0 - shouLen);\n        info.curScale    = startScale * Math.pow(zoomScale, index);\n        if(pai.showType == PaiType.SHOUGAI){\n            // info.bgFrameName =\"z_gai\"\n            info.curScale   =  info.curScale * 1.4;\n        }else if(pai.showType == PaiType.PENG){\n            // info.bgFrameName = \"z_p_0\";\n            info.curScale   =  info.curScale * 1.2;\n            info.skewY       = -15;\n            info.contentPos  = cc.p(-4, -13);\n            info.posScale    = Math.pow(1.026, index)  * 0.64;\n            info.pos      = cc.p(index * -6.5*info.posScale* this.paiScale + 76   ,  0 - shouLen);\n        }else if(pai.showType == PaiType.PENGBY){\n            // info.bgFrameName = \"z_pb_0\";\n            info.skewX    = 15;\n            info.contentPos = cc.p(-4, -17.5);\n            info.curScale   =  info.curScale * 1.3;\n            info.posScale    = Math.pow(1.028, index)  * 0.6;\n            info.pos      = cc.p(index * -6*info.posScale * this.paiScale + 78 - index*this.paiScale ,  0 - shouLen);\n            //pengby 第一个和第二个位置不一样\n            if(index % 3 == 2){\n                // info.pos.x -= 2*info.posScale;\n            }\n        }else if(pai.showType == PaiType.GAI){\n            // info.bgFrameName = \"z_gai\";\n            info.curScale   =  info.curScale * 1.1;\n            info.posScale    = Math.pow(1.018, index)  * 0.7;\n            info.pos      = cc.p(index * -6*info.posScale + 78 - index ,  0 - shouLen);\n        }else {\n            // info.bgFrameName = \"z_s_0\"\n\n        }\n        return info\n    }\n\n\n\n\n\n    this.setDachuPaiPos = function(paiNode, index){\n        paiNode.setPosition(this.getDachuInfo(index).pos);\n        paiNode.setLocalZOrder(index + 11);\n      \n    }\n\n    this.getBuhuaInfo = function(paiNode, index){\n        var info = {};\n        info.zOrder = (index + 10);\n        info.is3DView = this.is3DView;\n        if(!this.is3DView){\n            info.pos = cc.p(0, index * -28)\n            info.bgFrameName =\"zy_heng\";\n            info.contentPos = cc.p(0, -4);\n        }else {\n            var startScale = 0.5446;\n            var zoomScale  = 1.0166;\n            info.bgFrameName = \"z_d_\" + 2;\n            let curScale = startScale * Math.pow(zoomScale, index);\n            info.pos =  cc.p(index * -8 *curScale + 80 , index * -46 * curScale * Math.pow(0.990, index));\n            info.curScale = curScale;\n            info.skewY    = -15;//(0 - index / 4) * curScale;\n            info.contentPos = cc.p(0, -2);\n            info.sfScale = 1.3;\n        }\n        \n        return info\n    }\n\n\n\n\n    this.getDachuInfo = function(index){\n        var horizontal = 11;\n        var honIndex   = index % horizontal ;\n        var verIndex   = Math.floor(index / horizontal)\n        var info       = {}\n        var startScale = 0.5446;\n        var zoomScale  = 1.0166;\n        info.is3DView = this.is3DView;\n        info.zOrder = Math.floor( 100 - verIndex * 20  + honIndex);\n        if(!this.is3DView){\n            info.pos = cc.p(verIndex * this.EndWidth, honIndex * this.EndHeight)\n            info.bgFrameName =\"zy_heng\";\n            // info.zOrder = index;\n            info.curScale = 0.86;\n            info.contentPos = cc.p(0, -4);\n        }else{\n            info.bgFrameName = \"z_d_\" + verIndex;\n            let curScale = startScale * Math.pow(zoomScale, honIndex);\n            info.pos =  cc.p(verIndex * -64 * curScale - honIndex * 4 + 20, \n                honIndex * -44* curScale * Math.pow(0.992, honIndex) -22);\n            info.curScale = curScale;\n            info.contentPos = cc.p(0, -2);\n            // info.skewX   = 0 - honIndex/4; //(honIndex * 1.5 - 7.5) * curScale;\n            info.skewY   = -10;\n            info.sfScale = 1.3;\n        }\n        return info;\n    }\n\n    \n    \n    this.setShouRelativePos = function(pengGangLen, shouLen){\n        // if(this.is3DView){return}\n        var totalLen        = this.paiListNode.height;\n        this.pengGangPaiN.y = (shouLen + pengGangLen - totalLen) /2\n        this.shouPaiN.y     = this.pengGangPaiN.y - pengGangLen;\n    }\n\n\n    //获取新牌移动的动画\n    this.getNewMoveAction = function(newPos, curPos){\n        //距离\n        var moveY   = newPos.y - curPos.y;\n        var action1 = cc.moveBy(0.1, cc.p(20, 0));\n        var action2 = cc.moveBy(this.getDisTime(newPos, curPos), cc.p(0, moveY));\n        var action3 = cc.moveBy(0.1, cc.p(-20, 0));\n        return cc.sequence(action1, action2, action3);\n    }\n    \n};\n\nmodule.exports = {\n    instance : zuoControl,\n}\n"]}