{"version":3,"sources":["../../../../../../../assets/mahjong/script/wahua/desk/assets/mahjong/script/wahua/desk/playerUiWahua.js"],"names":["SeatEnum","cc","Enum","xia","you","shang","zuo","JiaWeiArr","WhDefine","require","WhUtils","Class","extends","Component","properties","orignalIcon","type","SpriteFrame","default","iconSp","Sprite","nameLabel","Label","scoreLabel","scoreBg","Node","readyNode","noCardNode","quanNode","directNode","emojiNode","textNode","voiceNode","offlineNode","waitNode","xiaPaiPrefab","Prefab","shangPaiPrefab","zuoPaiPrefab","youPaiPrefab","xiaPengPrefab","shangPengPrefab","hengPengPrefab","paiMianAltas","SpriteAtlas","onLoad","setWait","paiNode","node","getChildByName","shouPaiNode","pengGangNode","dachuPaiNode","_cardPool","NodePool","_paiArray","Array","string","active","setData","data","uipos","fun","utils","loadUrlRes","imageUrl","userName","userId","score","onLine","currentState","showReady","_uipos","initPool","event","dispatch","onDestroy","_initFlag","paiPerfabName","i","InitCardsNumber","pai","instantiate","put","setXiaPai","cards","length","get","setPosition","p","parent","getCardById","card","getComponent","spriteFrame","getSpriteFrame","setYouPai","setShangPai","setZuoPai","setCardShow","setScore","flag","showNoCard","showQuan","setDirect","direct","setDirectEnable","setEmoji","emoji","setText","text","setVoice","voice","showOffLine"],"mappings":"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","file":"playerUiWahua.js","sourceRoot":"../../../../../../../assets/mahjong/script/wahua/desk","sourcesContent":["const SeatEnum = cc.Enum({\n    xia: 0,\n    you: 1,\n    shang: 2,\n    zuo: 3,\n});\nconst JiaWeiArr = ['tianjia', 'dijia', 'yinpai', 'changsan'];\nconst WhDefine = require('whDefine');\nconst WhUtils = require('whUtils');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        orignalIcon: {\n            type: cc.SpriteFrame,\n            default: null,\n        },\n\n        iconSp: {\n            type: cc.Sprite,\n            default: null,\n        },\n\n        nameLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        scoreLabel: {\n            type: cc.Label,\n            default: null,\n        },\n\n        scoreBg: {\n            type: cc.Node,\n            default: null,\n        },\n\n        readyNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        noCardNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        quanNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        directNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        emojiNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        textNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        voiceNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        offlineNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        waitNode: {\n            type: cc.Node,\n            default: null,\n        },\n\n        xiaPaiPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        shangPaiPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        zuoPaiPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        youPaiPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        xiaPengPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        shangPengPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        hengPengPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n\n        paiMianAltas: {\n            type: cc.SpriteAtlas,\n            default: null,\n        },\n    },\n\n    onLoad () {\n        this.setWait();\n        let paiNode = this.node.getChildByName('paiNode');\n        this.shouPaiNode = paiNode.getChildByName('shouPai');\n        this.pengGangNode = paiNode.getChildByName('pengGang');\n        this.dachuPaiNode = paiNode.getChildByName('dachuPai');\n        this._cardPool = new cc.NodePool();\n        this._paiArray = new Array();\n    },\n\n    setWait() {\n        this.iconSp.SpriteFrame = this.orignalIcon;\n        this.nameLabel.string = '';\n        this.scoreLabel.string = '';\n        this.scoreBg.active = false;\n        this.readyNode.active = false;\n        this.offlineNode.active = false;\n        this.waitNode.active = true;\n    },\n\n    setData(data, uipos) {\n        this.data = data;\n        fun.utils.loadUrlRes(data.imageUrl, this.node.getChildByName('icon'));\n        this.nameLabel.string = data.userName + ' ' + data.userId;\n        this.scoreLabel.string = data.score || 0 // totalScore;\n        this.node.getChildByName('name').active = true;\n        this.node.getChildByName('score').active = true;\n        this.scoreBg.active = true;\n        this.waitNode.active = false;\n        if (data.onLine && data.onLine !== 1) {  //1在线， 2不在线\n            this.offlineNode.active = true;\n        }\n        if(data.currentState === 1){\n            this.showReady(true);\n        }\n        this._uipos = uipos;\n        this.initPool();\n        fun.event.dispatch('wahuaInitCompleted', uipos);\n    },\n\n    onDestroy() {\n        this._cardPool = [];\n        this._paiArray = [];\n    },\n\n    initPool() {\n        if (this._initFlag) return;\n        this._initFlag = true;\n        let paiPerfabName = 'xiaPaiPrefab';\n        switch(this._uipos){\n            case SeatEnum.xia:\n                paiPerfabName = 'xiaPaiPrefab';\n                break;\n            case SeatEnum.you:\n                paiPerfabName = 'youPaiPrefab';\n                break;\n            case SeatEnum.shang:\n                paiPerfabName = 'shangPaiPrefab';\n                break;\n            case SeatEnum.zuo:\n                paiPerfabName = 'zuoPaiPrefab';\n                break;\n            default:\n                break;\n        }\n        for (let i=0; i<WhDefine.InitCardsNumber; ++i) {\n            let pai = cc.instantiate(this[paiPerfabName]);\n            this._cardPool.put(pai);\n        }\n    },\n\n    setXiaPai(cards) {\n        for(let i=0; i<cards.length+1; ++i){\n            this._paiArray[i] = this._cardPool.get();\n            this._paiArray[i].setPosition(cc.p(i*60 + 20, -30));\n            this._paiArray[i].parent = this.shouPaiNode;\n            let pai = WhUtils.getCardById(cards[i]);\n            let card = this._paiArray[i].getChildByName('content').getComponent(cc.Sprite);\n            card.spriteFrame = this.paiMianAltas.getSpriteFrame(pai);\n        }\n    },\n    setYouPai(cards) {\n\n    },\n    setShangPai(cards) {\n\n    },\n    setZuoPai(cards) {\n\n    },\n\n    setCardShow(cards) {\n        switch(this._uipos){\n            case SeatEnum.xia:\n                this.setXiaPai(cards);\n                break;\n            case SeatEnum.you:\n                this.setYouPai(cards);\n                break;\n            case SeatEnum.shang:\n                this.setShangPai(cards);\n                break;\n            case SeatEnum.zuo:\n                this.setZuoPai(cards);\n                break;\n            default:\n                break;\n        }\n    },\n\n    setScore(score = 0) {\n        this.scoreLabel.string = score;\n    },\n\n    showReady(flag) {\n        this.readyNode.active = flag;\n    },\n\n    showNoCard(flag) {\n        this.noCardNode.active = flag;\n    },\n\n    showQuan(flag) {\n        this.quanNode.active = flag;\n    },\n\n    setDirect(direct) {\n        this.setDirectEnable();\n        this.directNode.active = true;\n        for (let i=0; i<JiaWeiArr.length; ++i) {\n            this.directNode.getChildByName(JiaWeiArr[i]).active = false;\n        }\n        this.directNode.getChildByName(JiaWeiArr[direct]).active = true;\n    },\n\n    setDirectEnable() {\n        this.directNode.active = false;\n    },\n\n    setEmoji(emoji) {\n\n    },\n\n    setText(text) {\n\n    },\n\n    setVoice(voice) {\n\n    },\n\n    showOffLine(flag) {\n        this.offlineNode.active = flag;\n    },\n\n});\n"]}